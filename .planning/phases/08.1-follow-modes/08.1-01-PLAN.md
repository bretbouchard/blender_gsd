---
phase: 08.1-follow-modes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/cinematic/follow_cam/types.py
  - configs/cinematic/follow_cam/follow_modes.yaml
autonomous: true

must_haves:
  truths:
    - "User can select from 8 follow camera modes"
    - "Each mode has configurable parameters"
    - "Presets are loadable from YAML configuration"
    - "Configuration supports transitions between modes"
  artifacts:
    - path: "lib/cinematic/follow_cam/types.py"
      provides: "FollowMode enum, FollowCameraConfig dataclass"
      exports: ["FollowMode", "LockedPlane", "ObstacleResponse", "TransitionType", "FollowTarget", "FollowCameraConfig", "CameraState"]
    - path: "configs/cinematic/follow_cam/follow_modes.yaml"
      provides: "Presets for all 8 follow modes"
      contains: "side_scroller_default"
  key_links:
    - from: "follow_modes.yaml"
      to: "FollowCameraConfig.from_dict()"
      via: "YAML loader"
      pattern: "from_dict"
---

<objective>
Define all follow camera mode types, configurations, and YAML presets.

Purpose: Establish the type system and configuration for 8 follow camera modes (side-scroller, over-shoulder, chase, chase-side, orbit-follow, lead, aerial, free-roam).

Output: Complete type definitions and preset configurations for all follow modes.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS_FOLLOW_CAMERA.md

# Prior phase context
@.planning/phases/07.5-advanced-features/07.5-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define Follow Camera Type System</name>
  <files>lib/cinematic/follow_cam/types.py</files>
  <action>
Create the complete type system for follow cameras in `lib/cinematic/follow_cam/types.py`:

1. **FollowMode enum** - 8 modes:
   - SIDE_SCROLLER - Locked plane for 2.5D platformer
   - OVER_SHOULDER - Third-person behind subject
   - CHASE - Chase from behind with speed response
   - CHASE_SIDE - Chase from side (racing games)
   - ORBIT_FOLLOW - Orbit around subject while following
   - LEAD - Camera ahead of subject
   - AERIAL - Top-down bird's eye view
   - FREE_ROAM - Free camera with collision

2. **Supporting enums**:
   - LockedPlane (XY, XZ, YZ) - For side-scroller axis locking
   - ObstacleResponse (PUSH_FORWARD, ORBIT_AWAY, RAISE_UP, ZOOM_THROUGH, BACK_AWAY)
   - TransitionType (CUT, BLEND, ORBIT, DOLLY)

3. **Dataclasses**:
   - FollowTarget - Target specification (object_name, bone_name, offset, look_ahead_distance, velocity_smoothing, prediction_frames)
   - ObstacleInfo - Obstacle data (object_name, position, normal, distance, is_transparent, is_trigger, response)
   - FollowCameraConfig - Complete configuration with:
     - Mode selection (follow_mode: FollowMode)
     - Target (target: FollowTarget)
     - Distance (min_distance, max_distance, ideal_distance, distance_smoothing)
     - Height (min_height, max_height, ideal_height, height_smoothing)
     - Rotation (yaw_smoothing, pitch_smoothing, roll_enabled)
     - Mode-specific (shoulder_offset, lead_distance, orbit_speed, locked_plane)
     - Collision (collision_enabled, collision_radius, collision_layers, ignore_objects)
     - Obstacle response (obstacle_response, min_obstacle_distance)
     - Transition (transition_duration, transition_type)
     - Framing (dead_zone_radius, rule_of_thirds_offset, headroom)
   - CameraState - Runtime state tracking

Each dataclass MUST have:
- to_dict() method for serialization
- from_dict() classmethod for deserialization
- Default values matching requirements
  </action>
  <verify>
    python3 -c "from lib.cinematic.follow_cam.types import FollowMode, FollowCameraConfig; print([m.value for m in FollowMode])"
  </verify>
  <done>
All 8 FollowMode values defined, FollowCameraConfig has all required fields, to_dict/from_dict methods work correctly
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Follow Mode Presets YAML</name>
  <files>configs/cinematic/follow_cam/follow_modes.yaml</files>
  <action>
Create comprehensive presets for all 8 follow modes in `configs/cinematic/follow_cam/follow_modes.yaml`:

**Required presets (at minimum):**

1. **Side-Scroller (2 presets)**:
   - side_scroller_default: XZ plane locked, distance 5.0, height 2.0
   - side_scroller_vertical: XY plane locked for top-down

2. **Over-Shoulder (3 presets)**:
   - over_shoulder_default: Right shoulder, distance 2.5, height 1.6
   - over_shoulder_left: Left shoulder (negative offset)
   - over_shoulder_close: Tight framing, distance 1.5

3. **Chase (3 presets)**:
   - chase_default: Distance 4.0, speed factor 0.3
   - chase_racing: Distance 6.0, speed factor 0.5
   - chase_side: Side chase with shoulder_offset

4. **Orbit-Follow (3 presets)**:
   - orbit_follow_default: Orbit speed 20 deg/s
   - orbit_follow_slow: Orbit speed 10 deg/s
   - orbit_follow_fast: Orbit speed 45 deg/s

5. **Lead (2 presets)**:
   - lead_default: Lead distance 2.0
   - lead_far: Lead distance 4.0

6. **Aerial (3 presets)**:
   - aerial_default: Height 8.0
   - aerial_close: Height 5.0
   - aerial_cinematic: Height 12.0

7. **Free Roam (2 presets)**:
   - free_roam_default: Collision enabled
   - free_roam_tight: Smaller collision radius

8. **Transition presets (4)**:
   - transition_instant: cut, duration 0
   - transition_smooth: blend, duration 0.5
   - transition_cinematic: dolly, duration 1.0
   - transition_orbit: orbit, duration 0.75

Each preset MUST include the `follow_mode` field.
  </action>
  <verify>
    cat configs/cinematic/follow_cam/follow_modes.yaml | grep -c "follow_mode"
  </verify>
  <done>
At least 18 presets defined with follow_mode field, covering all 8 modes and 4 transition types
  </done>
</task>

</tasks>

<verification>
1. All 8 FollowMode enum values defined
2. FollowCameraConfig dataclass has 30+ configuration fields
3. 18+ presets in YAML covering all modes
4. Serialization round-trip works (to_dict -> from_dict produces identical config)
</verification>

<success_criteria>
- FollowMode enum has exactly 8 values
- FollowCameraConfig supports all mode-specific parameters
- YAML has presets for every follow mode
- Types can be imported without errors
</success_criteria>

<output>
After completion, create `.planning/phases/08.1-follow-modes/08.1-01-SUMMARY.md`
</output>

---
phase: 06.7-support-systems
plan: 03
type: execute
wave: 3
depends_on:
  - 06.7-01
  - 06.7-02
files_modified:
  - lib/cinematic/__init__.py
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All support system types are exported from the cinematic package"
    - "All support system functions are exported from the cinematic package"
    - "All preset loader functions are exported from the cinematic package"
    - "Package version is bumped to 0.2.3"
  artifacts:
    - path: "lib/cinematic/__init__.py"
      provides: "All new exports for support systems"
      min_lines: 700
  key_links:
    - from: "lib/cinematic/__init__.py"
      to: "lib/cinematic/shuffler.py"
      via: "from .shuffler import"
      pattern: "shuffler"
---

<objective>
Export all support system types and functions from the cinematic package, bump version to 0.2.3

Purpose: Make support system functionality available via package imports
Output: Updated __init__.py with ~50 new exports, version 0.2.3
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing __init__.py
@lib/cinematic/__init__.py

# New modules to export
@lib/cinematic/shuffler.py
@lib/cinematic/frame_store.py
@lib/cinematic/depth_layers.py
@lib/cinematic/composition.py
@lib/cinematic/lens_fx.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Support System Type Exports to __init__.py</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update lib/cinematic/__init__.py to export the new support system types.

1. Add imports from types.py (extend existing import block):
```python
from .types import (
    # ... existing imports ...
    # Support system types
    ShuffleConfig,
    FrameState,
    DepthLayerConfig,
    CompositionGuide,
    LensFXConfig,
)
```

2. Add imports from enums.py (extend existing import block):
```python
from .enums import (
    # ... existing imports ...
    # Support system enums
    CompositionGuideType,
    DepthLayer,
    LensFXType,
)
```

3. Add to __all__ list:
```python
    # Support system types
    "ShuffleConfig",
    "FrameState",
    "DepthLayerConfig",
    "CompositionGuide",
    "LensFXConfig",
    # Support system enums
    "CompositionGuideType",
    "DepthLayer",
    "LensFXType",
```
  </action>
  <verify>python3 -c "from lib.cinematic import ShuffleConfig, FrameState, DepthLayerConfig, CompositionGuide, LensFXConfig, CompositionGuideType, DepthLayer, LensFXType; print('Types exported correctly')"</verify>
  <done>ShuffleConfig, FrameState, DepthLayerConfig, CompositionGuide, LensFXConfig, CompositionGuideType, DepthLayer, LensFXType exported from package</done>
</task>

<task type="auto">
  <name>Task 2: Add Support System Preset Loader Exports to __init__.py</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update lib/cinematic/__init__.py to export the new support system preset loaders.

1. Add imports from preset_loader.py (extend existing import block):
```python
from .preset_loader import (
    # ... existing imports ...
    # Support system preset loaders
    get_shuffle_preset,
    get_depth_layer_preset,
    get_composition_guide_preset,
    get_lens_fx_preset,
    list_shuffle_presets,
    list_depth_layer_presets,
    list_composition_guide_presets,
    list_lens_fx_presets,
)
```

2. Add to __all__ list:
```python
    # Support system preset loaders
    "get_shuffle_preset",
    "get_depth_layer_preset",
    "get_composition_guide_preset",
    "get_lens_fx_preset",
    "list_shuffle_presets",
    "list_depth_layer_presets",
    "list_composition_guide_presets",
    "list_lens_fx_presets",
```
  </action>
  <verify>python3 -c "from lib.cinematic import get_shuffle_preset, get_depth_layer_preset, get_composition_guide_preset, get_lens_fx_preset; print('Preset loaders exported correctly')"</verify>
  <done>get_shuffle_preset(), get_depth_layer_preset(), get_composition_guide_preset(), get_lens_fx_preset() and list functions exported from package</done>
</task>

<task type="auto">
  <name>Task 3: Add Module Function Exports to __init__.py</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update lib/cinematic/__init__.py to export functions from the new modules.

1. Add imports from shuffler.py:
```python
from .shuffler import (
    generate_variations,
    apply_variation,
    create_shuffle_set,
)
```

2. Add imports from frame_store.py:
```python
from .frame_store import (
    capture_frame,
    restore_frame,
    compare_frames,
    get_frame_history,
    label_frame,
)
```

3. Add imports from depth_layers.py:
```python
from .depth_layers import (
    create_depth_layer,
    assign_to_layer,
    setup_dof_for_layers,
    get_layer_for_distance,
    auto_assign_by_distance,
)
```

4. Add imports from composition.py:
```python
from .composition import (
    create_guide_overlay,
    show_rule_of_thirds,
    show_golden_ratio,
    show_golden_spiral,
    show_center_cross,
    show_safe_areas,
    clear_guides,
    get_active_guides,
)
```

5. Add imports from lens_fx.py:
```python
from .lens_fx import (
    setup_lens_fx_compositor,
    apply_lens_fx,
    apply_bloom,
    apply_flare,
    apply_vignette,
    apply_chromatic_aberration,
    apply_film_grain,
    clear_lens_fx,
    get_active_fx,
)
```

6. Add all to __all__ list:
```python
    # Shuffler functions
    "generate_variations",
    "apply_variation",
    "create_shuffle_set",
    # Frame store functions
    "capture_frame",
    "restore_frame",
    "compare_frames",
    "get_frame_history",
    "label_frame",
    # Depth layer functions
    "create_depth_layer",
    "assign_to_layer",
    "setup_dof_for_layers",
    "get_layer_for_distance",
    "auto_assign_by_distance",
    # Composition functions
    "create_guide_overlay",
    "show_rule_of_thirds",
    "show_golden_ratio",
    "show_golden_spiral",
    "show_center_cross",
    "show_safe_areas",
    "clear_guides",
    "get_active_guides",
    # Lens FX functions
    "setup_lens_fx_compositor",
    "apply_lens_fx",
    "apply_bloom",
    "apply_flare",
    "apply_vignette",
    "apply_chromatic_aberration",
    "apply_film_grain",
    "clear_lens_fx",
    "get_active_fx",
```
  </action>
  <verify>python3 -c "from lib.cinematic import generate_variations, capture_frame, create_depth_layer, show_rule_of_thirds, apply_lens_fx; print('Module functions exported correctly')"</verify>
  <done>All module functions exported from package</done>
</task>

<task type="auto">
  <name>Task 4: Bump Version to 0.2.3</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update the version in lib/cinematic/__init__.py:

Change:
```python
__version__ = "0.2.2"
```

To:
```python
__version__ = "0.2.3"
```

Also update the docstring at the top to reflect new modules:
- shuffler: Shot variation generator
- frame_store: State capture/comparison
- depth_layers: Fore/mid/background organization
- composition: Composition guide overlays
- lens_fx: Post-process lens effects
  </action>
  <verify>python3 -c "from lib.cinematic import __version__; assert __version__ == '0.2.3', f'Version mismatch: {__version__}'; print(f'Version: {__version__}')"</verify>
  <done>Package version bumped to 0.2.3 with updated docstring</done>
</task>

</tasks>

<verification>
1. Verify all new types can be imported from lib.cinematic
2. Verify all new preset loaders can be imported from lib.cinematic
3. Verify all new module functions can be imported from lib.cinematic
4. Verify version is 0.2.3
5. Verify __all__ list is complete and accurate
6. Run full import test: python3 -c "from lib.cinematic import *"
</verification>

<success_criteria>
- ShuffleConfig, FrameState, DepthLayerConfig, CompositionGuide, LensFXConfig exported
- CompositionGuideType, DepthLayer, LensFXType enums exported
- get_shuffle_preset(), get_depth_layer_preset(), get_composition_guide_preset(), get_lens_fx_preset() exported
- All list_* functions for presets exported
- All module functions (generate_variations, capture_frame, create_depth_layer, etc.) exported
- Version updated to 0.2.3
- Docstring updated with new modules
- All imports work without errors
- __all__ list is complete
</success_criteria>

<output>
After completion, create `.planning/phases/06.7-support-systems/06.7-03-SUMMARY.md`
</output>

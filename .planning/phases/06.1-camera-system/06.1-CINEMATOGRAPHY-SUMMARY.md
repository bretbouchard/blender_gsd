# Cinematography Integration Summary

## What Was Built

Integrated professional cinematographer rules into the cinematic system, tying camera settings to lighting automatically based on shot composition.

## Key Additions

### 1. Composition Rules Constants (types.py)

**Shot Sizes** - How much of subject is in frame:
- `ecu` - Extreme Close-Up (eyes, lips, detail)
- `cu` - Close-Up (face fills frame)
- `mcu` - Medium Close-Up (chest up)
- `m` - Medium (waist up)
- `mf` - Medium Full (knees up)
- `f` - Full (full body)
- `w` - Wide (subject in environment)
- `ew` - Extreme Wide (establishing shot)

**Lens by Shot Size** - Auto lens selection:
```
ECU → 100mm macro
CU  → 85mm portrait
MCU → 65mm normal
M   → 50mm normal
F   → 35mm documentary
W   → 24mm wide
EW  → 14mm ultra wide
```

**F-Stop by Shot Size** - Auto depth of field:
```
ECU → f/11 (deep DOF for detail)
CU  → f/2.8 (shallow, subject separation)
MCU → f/4 (moderate DOF)
M   → f/5.6 (balanced)
W   → f/11 (deep, see environment)
```

**Lighting Ratios by Mood**:
```
high_key  → 1.5:1 (bright, minimal shadows)
normal    → 2:1 (standard)
dramatic  → 4:1 (moody)
low_key   → 8:1 (very dark)
noir      → 16:1 (extreme contrast)
```

### 2. New Dataclasses

**CompositionConfig** - The "DP's cheat sheet":
- shot_size, camera_angle, camera_position
- lens_focal_length, lens_preset, f_stop
- lighting_ratio, headroom, looking_room
- Factory: `from_shot_size("mcu", mood="dramatic")`

**CompleteShotConfig** - Master configuration:
- composition: CompositionConfig
- camera: CameraConfig
- plumb_bob: PlumbBobConfig
- rig: RigConfig
- lighting_rig: str (preset name)
- backdrop: BackdropConfig
- imperfections: ImperfectionConfig
- Factories: `from_shot_size()`, `from_preset()`

### 3. Usage Examples

```python
from lib.cinematic import CompleteShotConfig, CompositionConfig

# Auto-select everything from shot size
shot = CompleteShotConfig.from_shot_size("mcu", mood="dramatic")
# → 65mm lens, f/4, 4:1 lighting ratio

# Just composition rules
comp = CompositionConfig.from_shot_size("cu", mood="noir")
# → 85mm lens, f/2.8, 16:1 lighting ratio

# Build complete shot manually
shot = CompleteShotConfig(
    name="hero_product",
    composition=CompositionConfig(shot_size="cu"),
    camera=CameraConfig(focal_length=85, f_stop=2.8),
    lighting_rig="three_point_soft",
    backdrop=BackdropConfig(backdrop_type="gradient"),
)
```

## Professional DP Methodology Implemented

### The 5 Pillars of Every Shot
1. **Lens Choice** - Determines perspective, compression, DOF
2. **Camera Angle** - Determines power, emotion, scale
3. **Lighting Setup** - Determines mood, dimension, time of day
4. **Subject Framing** - Determines focus, story, composition
5. **Camera Movement** - Determines energy, reveal, pacing

### Key Rules Baked In
- Lens dictates lighting ratio (wide = low contrast, telephoto = high contrast)
- F-stop dictates subject separation (f/2 = dreamy, f/11 = everything sharp)
- Camera height dictates key light position
- Shot size dictates lighting complexity

## Files Modified

- `lib/cinematic/types.py` - Added ~300 lines with composition rules
- `lib/cinematic/__init__.py` - Added exports for new types/constants

## Documentation

- `.planning/CINEMATOGRAPHY_RULES.md` - Professional DP methodology reference

## Integration Points

The composition rules integrate with:
- **Camera System** - Auto lens/f-stop selection
- **Lighting System** - Auto lighting ratio selection
- **Shot Presets** - Presets can override defaults
- **State Persistence** - CompleteShotConfig is fully serializable

## Version

- Cinematic system version: 0.2.0

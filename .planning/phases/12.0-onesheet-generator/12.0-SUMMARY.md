# Phase 12.0: 1-Sheet Generator - Summary

**Status:** Complete
**Started:** 2026-02-19
**Completed:** 2026-02-19

## Overview

Implemented a 1-sheet generator that produces presentable asset sheets from tracking data. These 1-sheets can be exported as HTML files, printed to PDF, or (optionally) exported as PNG images.

## Implementation Details

### Type Definitions (`tracking-ui/src/onesheet/types.ts`)

```typescript
interface OneSheetConfig {
  width: number;
  height: number;
  heroImageSize: { width: number; height: number };
  thumbSize: { width: number; height: number };
  showQRCode: boolean;
  showDependencies: boolean;
  theme: 'dark' | 'light';
}

interface OneSheetData {
  item: TrackingItem;
  heroImage?: string;
  thumbnails: string[];
  dependencies: TrackingItem[];
  config: OneSheetConfig;
}
```

### Templates (`tracking-ui/src/onesheet/templates/`)

1. **base.ts** - Base template with:
   - Hero image (800x450px)
   - Title block (name + ID)
   - Category/status badges
   - Description section
   - Thumbnail gallery (up to 4)
   - Dependencies list
   - Footer with source, meta, QR placeholder
   - Dark/light theme support
   - Print-optimized CSS

2. **character.ts** - Character-specific template (extends base)
3. **prop.ts** - Prop-specific template (extends base)
4. **shot.ts** - Shot-specific template (extends base)
5. **index.ts** - Template router

### Export Functions (`tracking-ui/src/onesheet/export/`)

1. **html.ts** - HTML export
   - `exportHTML()` - Generate HTML string
   - `downloadHTML()` - Download as .html file
   - `getStatePath()` - Get .gsd-state path

2. **pdf.ts** - PDF export (via print)
   - `exportPDF()` - Open in new window for printing

3. **png.ts** - PNG export (optional, requires html2canvas)
   - `exportPNG()` - Capture element as PNG
   - `exportOneSheetPNG()` - Render and capture 1-sheet

### Generator Service (`tracking-ui/src/onesheet/generator.ts`)

```typescript
class OneSheetGenerator {
  generate(item: TrackingItem): OneSheetData;
  generateHTML(item: TrackingItem): string;
  downloadHTML(item: TrackingItem): void;
  printPDF(item: TrackingItem): void;
  generateAll(): BatchResult[];
}
```

### Preview Component (`tracking-ui/src/components/OneSheetPreview.ts`)

- Modal preview with iframe
- Download HTML button
- Print PDF button
- Close button
- Escape key support
- Backdrop click to close

### Integration

Added 1-sheet button (ğŸ“„) to `ItemCard.ts` footer. Clicking opens preview modal.

## Files Created

```
tracking-ui/src/onesheet/
â”œâ”€â”€ types.ts              # Type definitions
â”œâ”€â”€ generator.ts          # Generator service
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.ts          # Template router
â”‚   â”œâ”€â”€ base.ts           # Base template (400+ lines)
â”‚   â”œâ”€â”€ character.ts      # Character template
â”‚   â”œâ”€â”€ prop.ts           # Prop template
â”‚   â””â”€â”€ shot.ts           # Shot template
â””â”€â”€ export/
    â”œâ”€â”€ index.ts          # Export index
    â”œâ”€â”€ html.ts           # HTML export
    â”œâ”€â”€ pdf.ts            # PDF export
    â””â”€â”€ png.ts            # PNG export (optional)

tracking-ui/src/components/
â””â”€â”€ OneSheetPreview.ts    # Preview modal component

tracking-ui/src/components/ItemCard.ts (modified)
tracking-ui/src/styles/main.css (modified)
tracking-ui/vite.config.ts (modified - externalize html2canvas)
```

## 1-Sheet Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                â”‚
â”‚         [ HERO IMAGE - 800x450 ]               â”‚
â”‚                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  HERO CHARACTER                [Character] âœ“   â”‚
â”‚  ID: CHAR-001                                  â”‚
â”‚                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                â”‚
â”‚  Description:                                  â”‚
â”‚  Main protagonist of the story. A reluctant    â”‚
â”‚  hero who discovers hidden powers...           â”‚
â”‚                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                â”‚
â”‚  [thumb1]  [thumb2]  [thumb3]  [thumb4]        â”‚
â”‚                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                â”‚
â”‚  Dependencies:                                 â”‚
â”‚  â†’ WARD-001: Hero Costume                      â”‚
â”‚  â†’ PROP-015: Hero Weapon                       â”‚
â”‚                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                â”‚
â”‚  Source: specs/characters/hero.md              â”‚
â”‚  Created: 2026-02-19 by bret                   â”‚
â”‚  [QR: CHAR-001]               blender_gsd      â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Requirements Met

| Requirement | Status | Notes |
|------------|--------|-------|
| REQ-ONESHEET-01 | Complete | HTML generation with hero image, metadata, description |
| REQ-ONESHEET-02 | Complete | HTML/PDF export, preview modal |
| Export to HTML | Complete | Download as .html file |
| Export to PDF | Complete | Via browser print dialog |
| Preview | Complete | Modal preview with actions |
| Category templates | Complete | Character, prop, shot templates |
| Dark theme | Complete | Default theme with light option |

## Dependencies

- **Required:** None (core functionality works without extras)
- **Optional:** `html2canvas` for PNG export (externalized, not bundled)

## Usage

1. Click ğŸ“„ button on any item card
2. Preview modal opens with 1-sheet
3. Click "Download HTML" to save as .html file
4. Click "Print PDF" to print to PDF
5. Close with X, Escape, or backdrop click

## Notes

- PNG export requires installing html2canvas: `npm install html2canvas`
- QR code is placeholder (future: generate actual QR codes)
- Templates can be extended with category-specific sections
- Print CSS included for clean PDF output

---
phase: 08.0-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/cinematic/follow_cam/__init__.py
  - lib/cinematic/follow_cam/types.py
  - configs/cinematic/follow_cam/follow_modes.yaml
autonomous: true

must_haves:
  truths:
    - "Follow camera module structure exists"
    - "Configuration directory exists for follow camera presets"
    - "Core types are importable from follow_cam package"
  artifacts:
    - path: "lib/cinematic/follow_cam/__init__.py"
      provides: "Package initialization and exports"
    - path: "lib/cinematic/follow_cam/types.py"
      provides: "Core type definitions"
      min_lines: 200
    - path: "configs/cinematic/follow_cam/follow_modes.yaml"
      provides: "Mode presets configuration"
  key_links:
    - from: "__init__.py"
      to: "types.py"
      via: "import"
      pattern: "from \\.types import"
---

<objective>
Establish follow camera module structure and configuration directory.

Purpose: Create the foundation for the follow camera system with module structure, core types, and configuration directory.

Output: Working module structure ready for follow mode implementations.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS_FOLLOW_CAMERA.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Follow Camera Module Structure</name>
  <files>lib/cinematic/follow_cam/__init__.py, lib/cinematic/follow_cam/types.py</files>
  <action>
Create the follow camera module structure at `lib/cinematic/follow_cam/`:

1. **Create package directory**: `lib/cinematic/follow_cam/`

2. **Module files to create**:
   - `__init__.py` - Package initialization
   - `types.py` - Core data types (enums, dataclasses)
   - `follow_modes.py` - Mode implementations (Phase 8.1)
   - `transitions.py` - Mode transitions (Phase 8.1)
   - `collision.py` - Collision detection (Phase 8.2)
   - `prediction.py` - Motion prediction (Phase 8.2)
   - `framing.py` - Intelligent framing (Phase 8.4)
   - `pre_solve.py` - Pre-solve workflow (Phase 8.3)
   - `navmesh.py` - Navigation mesh (Phase 8.3)
   - `debug.py` - Debug visualization (Phase 8.4)

3. **Create configuration directory**: `configs/cinematic/follow_cam/`

4. **Create state directory**: `.gsd-state/follow_cam/`
   - `solves/` - Pre-solved camera paths
   - `previews/` - Preview videos

For this task, create stub files with module docstrings indicating their purpose. The actual implementations will be done in subsequent phases.
  </action>
  <verify>
    ls -la lib/cinematic/follow_cam/*.py && ls -la configs/cinematic/follow_cam/
  </verify>
  <done>
All 10 module files created, config directory exists, state directory structure created
  </done>
</task>

<task type="auto">
  <name>Task 2: Define Core Follow Camera Types</name>
  <files>lib/cinematic/follow_cam/types.py</files>
  <action>
Create core type definitions in `lib/cinematic/follow_cam/types.py`:

1. **Imports**:
   ```python
   from dataclasses import dataclass, field
   from typing import Dict, Any, Optional, Tuple, List
   from enum import Enum
   ```

2. **FollowMode enum** with 8 values:
   - SIDE_SCROLLER, OVER_SHOULDER, CHASE, CHASE_SIDE
   - ORBIT_FOLLOW, LEAD, AERIAL, FREE_ROAM

3. **Supporting enums**:
   - LockedPlane (XY, XZ, YZ)
   - ObstacleResponse (PUSH_FORWARD, ORBIT_AWAY, RAISE_UP, ZOOM_THROUGH, BACK_AWAY)
   - TransitionType (CUT, BLEND, ORBIT, DOLLY)

4. **FollowTarget dataclass**:
   - object_name, bone_name, offset, look_ahead_distance
   - velocity_smoothing, prediction_frames, use_animation_prediction

5. **ObstacleInfo dataclass**:
   - object_name, position, normal, distance
   - is_transparent, is_trigger, response

6. **FollowCameraConfig dataclass** (with defaults):
   - name, follow_mode, target
   - Distance/height settings (min, max, ideal, smoothing)
   - Rotation settings (yaw, pitch smoothing)
   - Mode-specific settings (shoulder_offset, lead_distance, orbit_speed)
   - Collision settings
   - Transition settings
   - Framing settings

7. **CameraState dataclass**:
   - Current position, rotation, velocity
   - Target tracking state
   - Transition state

Each dataclass MUST have to_dict() and from_dict() methods.
  </action>
  <verify>
    python3 -c "from lib.cinematic.follow_cam.types import FollowMode, FollowCameraConfig; print(f'{len(list(FollowMode))} modes')"
  </verify>
  <done>
FollowMode enum with 8 values, FollowCameraConfig with serialization, CameraState for runtime tracking
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Follow Modes Configuration</name>
  <files>configs/cinematic/follow_cam/follow_modes.yaml</files>
  <action>
Create initial follow modes configuration at `configs/cinematic/follow_cam/follow_modes.yaml`:

Include at least one preset for each of the 8 follow modes:

1. **side_scroller_default**: XZ plane, distance 5.0, height 2.0
2. **over_shoulder_default**: shoulder_offset 0.5, distance 2.5, height 1.6
3. **chase_default**: distance 4.0, speed_distance_factor 0.3
4. **chase_side**: distance 5.0, shoulder_offset 3.0
5. **orbit_follow_default**: distance 3.0, orbit_speed 20.0
6. **lead_default**: lead_distance 2.0, distance 3.0
7. **aerial_default**: height 8.0, distance 10.0
8. **free_roam_default**: collision_enabled true, distance 3.0

Each preset MUST include:
- name: Human-readable name
- follow_mode: Mode identifier

Add YAML header comment explaining the configuration structure.
  </action>
  <verify>
    grep -c "follow_mode:" configs/cinematic/follow_cam/follow_modes.yaml
  </verify>
  <done>
At least 8 presets defined, one for each follow mode
  </done>
</task>

</tasks>

<verification>
1. Module structure exists with all required files
2. Types importable from lib.cinematic.follow_cam
3. Configuration directory has follow_modes.yaml
4. State directory structure created
</verification>

<success_criteria>
- lib/cinematic/follow_cam/ is importable
- FollowMode enum has 8 values
- configs/cinematic/follow_cam/follow_modes.yaml exists with 8+ presets
- .gsd-state/follow_cam/ directory structure exists
</success_criteria>

<output>
After completion, create `.planning/phases/08.0-foundation/08.0-01-SUMMARY.md`
</output>

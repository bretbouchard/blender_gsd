---
phase: 06.5-animation-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/cinematic/types.py
  - lib/cinematic/preset_loader.py
  - configs/cinematic/animation/turntable_presets.yaml
autonomous: true

must_haves:
  truths:
    - "AnimationConfig dataclass exists with all animation type properties"
    - "MotionPathConfig dataclass exists with Bezier/spline path properties"
    - "TurntableConfig dataclass exists for subject rotation"
    - "Animation preset loaders exist in preset_loader.py"
    - "Turntable presets YAML file exists with default configurations"
  artifacts:
    - path: "lib/cinematic/types.py"
      provides: "Animation dataclasses (AnimationConfig, MotionPathConfig, TurntableConfig)"
      contains: "class AnimationConfig"
    - path: "lib/cinematic/preset_loader.py"
      provides: "Animation preset loading functions"
      exports: ["get_camera_move_preset", "get_easing_preset", "get_turntable_preset"]
    - path: "configs/cinematic/animation/turntable_presets.yaml"
      provides: "Turntable rotation presets"
      contains: "turntables:"
  key_links:
    - from: "lib/cinematic/preset_loader.py"
      to: "configs/cinematic/animation/camera_moves.yaml"
      via: "load_preset"
      pattern: "ANIMATION_CONFIG_ROOT.*camera_moves"
---

<objective>
Add animation types and preset loaders for the cinematic animation system.

Purpose: Establish the data structures and configuration loading infrastructure for camera animations, motion paths, and turntable rotations.
Output: AnimationConfig, MotionPathConfig, TurntableConfig dataclasses in types.py; animation preset loaders in preset_loader.py; turntable presets YAML.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06.5-animation-system/06.5-RESEARCH.md
@lib/cinematic/types.py
@lib/cinematic/preset_loader.py
@configs/cinematic/animation/camera_moves.yaml
@configs/cinematic/animation/easing_curves.yaml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Animation Dataclasses to types.py</name>
  <files>lib/cinematic/types.py</files>
  <action>
Add three new dataclasses at the end of types.py (before the composition constants section):

1. **AnimationConfig** dataclass for camera animation configuration:
   - enabled: bool = False
   - type: str = "static" (static, orbit, dolly, crane, push_in, turntable, pan, tilt, truck, rack_focus, custom)
   - duration: int = 120 (frames)
   - start_frame: int = 1
   - easing: str = "linear"
   - loop: bool = False
   - angle_range: Tuple[float, float] = (0, 360) (for orbit/pan)
   - radius: float = 1.0 (for orbit)
   - distance: float = 0.5 (for dolly/truck)
   - direction: str = "forward" (forward, backward, left, right, up, down)
   - elevation_range: Tuple[float, float] = (0, 45) (for crane)
   - subject_rotation: bool = False (for turntable mode)
   - from_value: float = 0.0 (for rack_focus from distance)
   - to_value: float = 1.0 (for rack_focus to distance)
   - Include to_dict() and from_dict() methods

2. **MotionPathConfig** dataclass for Bezier/spline paths:
   - path_type: str = "linear" (linear, spline, bezier, arc)
   - duration: int = 120
   - look_at: str = "plumb_bob" (plumb_bob, manual, object, forward)
   - interpolation: str = "bezier"
   - points: List[Dict[str, Any]] = field(default_factory=list) (control points with x,y,z)
   - preset: str = "" (e.g., "orbit_90", "dolly_in")
   - closed: bool = False (for loop paths)
   - Include to_dict() and from_dict() methods

3. **TurntableConfig** dataclass for subject rotation:
   - enabled: bool = False
   - axis: str = "Z" (X, Y, Z)
   - angle_range: Tuple[float, float] = (0, 360)
   - duration: int = 120
   - start_frame: int = 1
   - easing: str = "linear"
   - loop: bool = True
   - direction: str = "clockwise" (clockwise, counterclockwise)
   - rotation_speed: float = 1.0 (multiplier)
   - Include to_dict() and from_dict() methods

Follow the existing dataclass patterns (see ColorConfig, LUTConfig for reference).
  </action>
  <verify>grep -c "class AnimationConfig\|class MotionPathConfig\|class TurntableConfig" lib/cinematic/types.py</verify>
  <done>Three animation dataclasses exist with to_dict() and from_dict() methods</done>
</task>

<task type="auto">
  <name>Task 2: Add Animation Preset Loaders to preset_loader.py</name>
  <files>lib/cinematic/preset_loader.py</files>
  <action>
Add animation configuration root and preset loader functions to preset_loader.py:

1. Add constant at top of file (after existing CONFIG_ROOT constants):
```python
# Animation configuration root directory
ANIMATION_CONFIG_ROOT = Path("configs/cinematic/animation")
```

2. Add the following preset loader functions at the end of file (following the existing pattern):

- **get_camera_move_preset(name: str)**: Load camera move preset from camera_moves.yaml
  - Returns dict with move configuration (type, duration, easing, etc.)
  - Raises ValueError if preset not found

- **get_easing_preset(name: str)**: Load easing curve definition from easing_curves.yaml
  - Returns dict with easing formula and use cases
  - Raises ValueError if preset not found

- **get_turntable_preset(name: str)**: Load turntable preset from turntable_presets.yaml
  - Returns dict with turntable configuration
  - Raises ValueError if preset not found

- **list_camera_move_presets() -> List[str]**: List all available camera move names

- **list_easing_presets() -> List[str]**: List all available easing curve names

- **list_turntable_presets() -> List[str]**: List all available turntable preset names

Follow the existing pattern from get_color_preset() and list_color_presets().
  </action>
  <verify>grep -c "get_camera_move_preset\|get_easing_preset\|get_turntable_preset\|ANIMATION_CONFIG_ROOT" lib/cinematic/preset_loader.py</verify>
  <done>Animation preset loaders exist and can load from camera_moves.yaml, easing_curves.yaml, and turntable_presets.yaml</done>
</task>

<task type="auto">
  <name>Task 3: Create turntable_presets.yaml</name>
  <files>configs/cinematic/animation/turntable_presets.yaml</files>
  <action>
Create the turntable presets YAML file with standard product showcase configurations:

```yaml
# Turntable Rotation Presets
# Subject rotation configurations for product showcase shots

turntables:
  product_standard:
    axis: Z
    angle_range: [0, 360]
    duration: 240
    easing: linear
    loop: true
    direction: clockwise
    rotation_speed: 1.0
    description: "Standard 360-degree product rotation (10 seconds at 24fps)"

  product_slow:
    axis: Z
    angle_range: [0, 360]
    duration: 480
    easing: linear
    loop: true
    direction: clockwise
    rotation_speed: 0.5
    description: "Slow product rotation for detailed viewing (20 seconds)"

  product_fast:
    axis: Z
    angle_range: [0, 360]
    duration: 120
    easing: linear
    loop: true
    direction: clockwise
    rotation_speed: 2.0
    description: "Fast product rotation (5 seconds)"

  product_90:
    axis: Z
    angle_range: [0, 90]
    duration: 90
    easing: ease_in_out
    loop: false
    direction: clockwise
    rotation_speed: 1.0
    description: "90-degree product turn"

  product_180:
    axis: Z
    angle_range: [0, 180]
    duration: 120
    easing: ease_in_out
    loop: false
    direction: clockwise
    rotation_speed: 1.0
    description: "180-degree product turn"

  showcase_reveal:
    axis: Z
    angle_range: [45, 135]
    duration: 90
    easing: ease_in_out
    loop: false
    direction: clockwise
    rotation_speed: 1.0
    description: "Reveal turn from 3/4 front to 3/4 back"

  hero_spin:
    axis: Z
    angle_range: [0, 720]
    duration: 360
    easing: ease_in_out
    loop: false
    direction: clockwise
    rotation_speed: 1.0
    description: "Double rotation hero shot (15 seconds)"

  knob_detail:
    axis: Z
    angle_range: [0, 360]
    duration: 180
    easing: linear
    loop: true
    direction: clockwise
    rotation_speed: 1.0
    description: "Control knob full rotation (7.5 seconds)"
```

Place file in configs/cinematic/animation/ directory (same location as camera_moves.yaml and easing_curves.yaml).
  </action>
  <verify>test -f configs/cinematic/animation/turntable_presets.yaml && grep -c "turntables:" configs/cinematic/animation/turntable_presets.yaml</verify>
  <done>Turntable presets YAML file exists with 8 preset configurations</done>
</task>

</tasks>

<verification>
1. AnimationConfig, MotionPathConfig, TurntableConfig dataclasses exist in types.py
2. All dataclasses have to_dict() and from_dict() methods
3. ANIMATION_CONFIG_ROOT constant exists in preset_loader.py
4. get_camera_move_preset(), get_easing_preset(), get_turntable_preset() functions exist
5. list_*_presets() functions exist for all three preset types
6. turntable_presets.yaml exists with product_standard, product_slow, product_fast presets
</verification>

<success_criteria>
- 3 animation dataclasses added to types.py
- 6 animation preset loader functions added to preset_loader.py
- turntable_presets.yaml created with 8 presets
- All code follows existing patterns and conventions
</success_criteria>

<output>
After completion, create `.planning/phases/06.5-animation-system/06.5-01-SUMMARY.md`
</output>

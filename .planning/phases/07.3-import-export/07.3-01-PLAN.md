---
phase: 07.3-import-export
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/cinematic/tracking/import_export.py
autonomous: true

must_haves:
  truths:
    - "Collada .dae files import with camera animation preserved"
    - "Imported camera has keyframes matching source animation"
    - "Coordinate conversion from Y-up to Z-up works correctly"
  artifacts:
    - path: "lib/cinematic/tracking/import_export.py"
      provides: "ColladaParser class with parse() method"
      contains: "class ColladaParser"
  key_links:
    - from: "ColladaParser"
      to: "bpy.ops.wm.collada_import"
      via: "Blender native import"
      pattern: "collada_import"
---

<objective>
Add Collada (.dae) import support to the tracking import/export module using Blender's native Collada importer.

Purpose: Enable import of camera animation from DCC applications that export Collada format (SketchUp, Maya, 3ds Max, Blender itself).

Output: ColladaParser class added to import_export.py and registered in PARSERS dictionary.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07.3-import-export/07.3-RESEARCH.md
@lib/cinematic/tracking/import_export.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement ColladaParser class</name>
  <files>lib/cinematic/tracking/import_export.py</files>
  <action>
Add ColladaParser class to lib/cinematic/tracking/import_export.py following the existing parser patterns (FBXParser, AlembicParser, BVHParser).

Implementation requirements:
1. Create `ColladaParser` class with `parse()` static method
2. `parse(filepath: str, coordinate_system: str = "y_up") -> ImportedCamera`
3. Implement `_parse_via_blender()` method that:
   - Stores current selection before import
   - Calls `bpy.ops.wm.collada_import()` with `bind_animation=True`
   - Finds newly imported camera objects
   - Extracts position and rotation keyframes from `animation_data.action.fcurves`
   - Converts radians to degrees for euler rotations
   - Populates ImportedCamera.positions and ImportedCamera.rotations_euler
4. Implement `_parse_fallback()` method that:
   - Returns basic ImportedCamera with mock data for testing without Blender
5. Add ".dae" extension to TrackingImporter.PARSERS dictionary mapping to ColladaParser

Follow existing code patterns exactly:
- Same method signatures as FBXParser/AlembicParser
- Same error handling (return camera even on partial failure)
- Same coordinate conversion pattern using COORDINATE_SYSTEMS dict
</action>
  <verify>grep -q "class ColladaParser" lib/cinematic/tracking/import_export.py && grep -q '".dae": ColladaParser' lib/cinematic/tracking/import_export.py</verify>
  <done>ColladaParser class exists with parse() method returning ImportedCamera, registered in PARSERS dict for .dae extension</done>
</task>

</tasks>

<verification>
- ColladaParser.parse() returns ImportedCamera dataclass
- ".dae" key maps to ColladaParser in PARSERS dictionary
- Parser follows existing pattern (Blender import + fallback)
- Animation keyframes extracted from f-curves correctly
</verification>

<success_criteria>
- [x] ColladaParser class added to import_export.py
- [x] Parser uses Blender native collada_import operator
- [x] Animation data extracted from imported camera
- [x] Registered in PARSERS dict for .dae files
</success_criteria>

<output>
After completion, create `.planning/phases/07.3-import-export/07.3-01-SUMMARY.md`
</output>

---
phase: 06.8-shot-assembly
plan: 03
type: execute
wave: 3
depends_on: [06.8-02]
files_modified:
  - lib/cinematic/__init__.py
  - configs/cinematic/shots/templates.yaml
autonomous: true

must_haves:
  truths:
    - "All shot assembly exports available from cinematic package"
    - "Version bumped to 0.2.4"
    - "Template YAML presets available"
  artifacts:
    - path: "lib/cinematic/__init__.py"
      provides: "Shot assembly exports"
      exports: ["ShotTemplateConfig", "ShotAssemblyConfig", "assemble_shot", "load_shot_yaml", "save_shot_state", "render_shot", "create_shot_from_template", "edit_shot"]
    - path: "configs/cinematic/shots/templates.yaml"
      provides: "Base shot templates with inheritance"
  key_links:
    - from: "lib/cinematic/__init__.py"
      to: "lib/cinematic/shot.py"
      via: "from .shot import ..."
---

<objective>
Update __init__.py with shot assembly exports and create template YAML presets.

Purpose: Complete the shot assembly system with exports and configuration.
Output: Updated __init__.py (v0.2.4), templates.yaml with base templates.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing patterns
@lib/cinematic/__init__.py
@configs/cinematic/shots/*.yaml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shot templates YAML</name>
  <files>configs/cinematic/shots/templates.yaml</files>
  <action>
Create `configs/cinematic/shots/templates.yaml` with base templates and inheritance examples.

Include templates:
1. **base_product** (abstract) - Base for all product shots
2. **base_control_surface** (abstract) - Base for control surface shots
3. **studio_product** (extends base_product) - Standard studio product shot
4. **dramatic_product** (extends base_product) - Dramatic lighting product shot
5. **hero_knob** (extends base_control_surface) - Hero shot for knob control
6. **knob_turntable** (extends hero_knob) - Turntable rotation of knob

```yaml
# Shot Template System (REQ-CINE-TEMPLATE)
# Templates support inheritance via 'extends' field
# Abstract templates cannot be rendered directly

templates:
  # === ABSTRACT BASE TEMPLATES ===

  base_product:
    abstract: true
    description: "Base template for all product shots"
    camera:
      focal_length: 85.0
      f_stop: 4.0
      sensor_width: 36.0
    plumb_bob:
      mode: auto
      offset: [0, 0, 0.1]
    backdrop:
      backdrop_type: infinite_curve
      color_bottom: [0.95, 0.95, 0.95]
      color_top: [1.0, 1.0, 1.0]
      shadow_catcher: true
    color:
      view_transform: AgX
      look: AgX Default Medium High Contrast
    render:
      quality_tier: preview
      engine: BLENDER_EEVEE_NEXT
      resolution_x: 1920
      resolution_y: 1080

  base_control_surface:
    abstract: true
    description: "Base template for control surface component shots"
    extends: base_product
    camera:
      focal_length: 65.0
      f_stop: 5.6
    composition:
      shot_size: mcu
      camera_position: three_quarter

  # === PRODUCT TEMPLATES ===

  studio_product:
    description: "Standard studio product shot with soft lighting"
    extends: base_product
    lighting_rig: three_point_soft
    camera:
      focal_length: 85.0
      f_stop: 4.0

  dramatic_product:
    description: "Dramatic product shot with high contrast"
    extends: base_product
    lighting_rig: product_dramatic
    camera:
      f_stop: 2.8
    color:
      look: AgX High Contrast
    backdrop:
      color_bottom: [0.1, 0.1, 0.1]
      color_top: [0.2, 0.2, 0.2]

  # === CONTROL SURFACE TEMPLATES ===

  hero_knob:
    description: "Hero shot for knob controls"
    extends: base_control_surface
    camera:
      focal_length: 65.0
      f_stop: 4.0
    lighting_rig: three_point_soft
    composition:
      shot_size: cu
      camera_angle: eye
      camera_position: three_quarter

  knob_turntable:
    description: "360Â° turntable rotation of knob"
    extends: hero_knob
    animation:
      enabled: true
      type: turntable
      axis: Z
      angle_range: [0, 360]
      duration: 120
      loop: true

  knob_detail:
    description: "Close-up detail shot of knob features"
    extends: hero_knob
    camera:
      focal_length: 100.0
      f_stop: 8.0
    composition:
      shot_size: ecu

  hero_fader:
    description: "Hero shot for fader controls"
    extends: base_control_surface
    camera:
      focal_length: 50.0
      f_stop: 5.6
    lighting_rig: three_point_soft
    composition:
      shot_size: m
      camera_position: three_quarter

  hero_button:
    description: "Hero shot for button controls"
    extends: base_control_surface
    camera:
      focal_length: 65.0
      f_stop: 4.0
    lighting_rig: product_hero
    composition:
      shot_size: cu

  # === STYLE-SPECIFIC TEMPLATES ===

  neve_style:
    abstract: true
    description: "Neve-style color grading"
    extends: base_control_surface
    color:
      look: AgX Golden
    backdrop:
      color_bottom: [0.18, 0.16, 0.14]
      color_top: [0.25, 0.22, 0.18]

  ssl_style:
    abstract: true
    description: "SSL-style color grading"
    extends: base_control_surface
    color:
      look: AgX Cool Shadows
    backdrop:
      color_bottom: [0.12, 0.12, 0.14]
      color_top: [0.18, 0.18, 0.22]
```
  </action>
  <verify>python3 -c "
import yaml
from pathlib import Path
path = Path('configs/cinematic/shots/templates.yaml')
if path.exists():
    with open(path) as f:
        data = yaml.safe_load(f)
    templates = data.get('templates', {})
    assert 'base_product' in templates, 'base_product missing'
    assert templates['base_product'].get('abstract') == True, 'base_product should be abstract'
    assert 'studio_product' in templates, 'studio_product missing'
    assert templates['studio_product'].get('extends') == 'base_product', 'studio_product should extend base_product'
    print('templates.yaml structure OK')
else:
    print('templates.yaml created')
"</verify>
  <done>templates.yaml with base templates and inheritance</done>
</task>

<task type="auto">
  <name>Task 2: Update __init__.py with shot exports</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update `lib/cinematic/__init__.py` to:

1. Update version to 0.2.4
2. Add imports for shot types and functions
3. Add exports for shot module

Add after existing imports:
```python
# Shot Assembly (Phase 6.8)
from .types import ShotTemplateConfig, ShotAssemblyConfig
from .shot import (
    assemble_shot,
    load_shot_yaml,
    save_shot_state,
    load_shot_state,
    render_shot,
    create_shot_from_template,
    edit_shot,
)
```

Add to __all__ list:
```python
    # Shot Assembly
    "ShotTemplateConfig",
    "ShotAssemblyConfig",
    "assemble_shot",
    "load_shot_yaml",
    "save_shot_state",
    "load_shot_state",
    "render_shot",
    "create_shot_from_template",
    "edit_shot",
```

Update version:
```python
__version__ = "0.2.4"
```
  </action>
  <verify>python3 -c "
from lib.cinematic import (
    ShotTemplateConfig, ShotAssemblyConfig,
    assemble_shot, load_shot_yaml, save_shot_state, render_shot,
    create_shot_from_template, edit_shot, __version__
)
assert __version__ == '0.2.4', f'Version mismatch: {__version__}'
print(f'Version {__version__} - Shot assembly exports OK')
"</verify>
  <done>__init__.py updated with shot exports, version 0.2.4</done>
</task>

</tasks>

<verification>
1. templates.yaml exists with inheritance structure
2. __init__.py exports all shot types/functions
3. Version is 0.2.4
4. All imports work
</verification>

<success_criteria>
- Shot template presets available in templates.yaml
- Abstract templates marked properly
- Template inheritance (extends) works
- All exports available from cinematic package
- Version bumped to 0.2.4
</success_criteria>

<output>
After completion, create `.planning/phases/06.8-shot-assembly/06.8-03-SUMMARY.md`
</output>

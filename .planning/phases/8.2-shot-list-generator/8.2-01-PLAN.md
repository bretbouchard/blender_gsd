# Phase 8.2: Shot List Generator

**Phase**: 8.2
**Priority**: P1
**Dependencies**: Phase 8.1 (Script Parser)
**Est. Duration**: 4-5 days

---

## Goal

Automatically generate shot lists from parsed scripts with intelligent coverage suggestions.

---

## Requirements

- REQ-SHOT-01: Auto-generate shots from scenes
- REQ-SHOT-02: Coverage estimation
- REQ-SHOT-03: Shot size suggestions
- REQ-SHOT-04: Storyboard prompt generation

---

## Plans

### Plan 8.2-01: Shot Generator Types

**Deliverable**: `lib/development/shot_gen_types.py`

```python
@dataclass
class ShotSuggestion:
    """Suggested shot configuration."""
    scene_number: int
    shot_number: int
    shot_size: str  # ecu, cu, mcu, m, mf, f, w, ew
    camera_angle: str
    subject: str
    purpose: str  # coverage, reaction, insert, establishing
    estimated_duration: float
    priority: str  # essential, recommended, optional

@dataclass
class CoverageEstimate:
    """Coverage analysis for a scene."""
    scene_number: int
    master_shots: int
    closeups: int
    inserts: int
    reactions: int
    total_estimated: int
    minimum_coverage: int
    recommended_coverage: int

@dataclass
class ShotList:
    """Complete shot list."""
    production: str
    scenes: Dict[int, List[ShotSuggestion]]
    total_shots: int
    estimated_total_duration: float
```

**Tasks**:
1. Create dataclasses
2. Add serialization

---

### Plan 8.2-02: Scene Analyzer

**Deliverable**: `lib/development/scene_analyzer.py`

```python
def analyze_scene_for_shots(scene: Scene) -> List[ShotSuggestion]:
    """Analyze scene and generate shot suggestions."""
    pass

def count_characters_in_scene(scene: Scene) -> int:
    """Count speaking characters in scene."""
    pass

def identify_scene_type(scene: Scene) -> str:
    """Identify scene type (dialogue, action, transition)."""
    pass

def estimate_scene_duration(scene: Scene) -> float:
    """Estimate scene duration in seconds."""
    pass

def identify_key_moments(scene: Scene) -> List[int]:
    """Identify key moments that need coverage."""
    pass
```

**Tasks**:
1. Implement scene analysis
2. Implement character counting
3. Implement scene type detection
4. Implement duration estimation

---

### Plan 8.2-03: Shot Rules Engine

**Deliverable**: `lib/development/shot_rules.py`

```python
# Standard coverage rules
COVERAGE_RULES = {
    "dialogue_two_person": {
        "essential": ["master", "cu_a", "cu_b"],
        "recommended": ["mcu_a", "mcu_b", "two_shot"],
        "optional": ["inserts", "cutaways"]
    },
    "dialogue_multi_person": {
        "essential": ["master", "individual_cus"],
        "recommended": ["two_shots", "group_shots"],
        "optional": ["reaction_shots", "inserts"]
    },
    "action": {
        "essential": ["master", "key_beats"],
        "recommended": ["coverage_angles", "inserts"],
        "optional": ["slow_motion", "specialty"]
    },
    "transition": {
        "essential": ["establishing"],
        "recommended": [],
        "optional": []
    }
}

def apply_coverage_rules(scene: Scene) -> List[ShotSuggestion]:
    """Apply coverage rules to generate shot suggestions."""
    pass

def suggest_shot_size(subject: str, action: str, context: str) -> str:
    """Suggest appropriate shot size."""
    pass

def calculate_shot_priority(shot: ShotSuggestion, scene: Scene) -> str:
    """Calculate shot priority (essential/recommended/optional)."""
    pass
```

**Tasks**:
1. Implement coverage rules
2. Implement shot size suggestion
3. Implement priority calculation

---

### Plan 8.2-04: Storyboard Prompts

**Deliverable**: `lib/development/storyboard_prompts.py`

```python
def generate_storyboard_prompt(shot: ShotSuggestion, scene: Scene) -> str:
    """Generate text prompt for storyboard generation."""
    pass

def generate_ai_image_prompt(shot: ShotSuggestion, style: str) -> str:
    """Generate prompt for AI image generation."""
    pass

def create_shot_description(shot: ShotSuggestion) -> str:
    """Create human-readable shot description."""
    pass
```

**Tasks**:
1. Implement prompt generation
2. Implement AI image prompts
3. Implement descriptions

---

### Plan 8.2-05: Shot List Export

**Deliverable**: `lib/development/shot_list_export.py`

```python
def export_shot_list_csv(shot_list: ShotList, path: str) -> None:
    """Export shot list as CSV."""
    pass

def export_shot_list_pdf(shot_list: ShotList, path: str) -> None:
    """Export shot list as PDF."""
    pass

def export_shot_list_yaml(shot_list: ShotList, path: str) -> None:
    """Export shot list as YAML."""
    pass

def generate_shot_report(shot_list: ShotList) -> str:
    """Generate human-readable shot report."""
    pass
```

**Tasks**:
1. Implement CSV export
2. Implement PDF export
3. Implement YAML export
4. Implement report generation

---

## Acceptance Criteria

- [ ] Shot suggestions generated from scenes
- [ ] Coverage rules applied correctly
- [ ] Shot sizes appropriate for content
- [ ] Storyboard prompts generated
- [ ] Export produces valid files

---

## Files

```
lib/development/
├── shot_gen_types.py
├── scene_analyzer.py
├── shot_rules.py
├── storyboard_prompts.py
└── shot_list_export.py
```

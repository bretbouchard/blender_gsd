# Phase 06.4 Plan 01: Color Pipeline Types Summary

---
phase: 06.4-color-pipeline
plan: 01
subsystem: color-pipeline
tags: [color, types, enums, preset-loader, lut, exposure]
requires: []
provides:
  - ColorConfig dataclass for color management settings
  - LUTConfig dataclass for LUT configuration
  - ExposureLockConfig dataclass for auto-exposure locking
  - ViewTransform enum for Blender view transforms
  - WorkingColorSpace enum for scene linear color spaces
  - Color preset loader functions
affects:
  - 06.4-02 (Color Management Module)
  - 06.4-03 (Package Exports)
---

## One-Liner

ColorConfig, LUTConfig, ExposureLockConfig dataclasses with ViewTransform/WorkingColorSpace enums and color preset loaders for cinematic color management.

## Objective

Extend types.py with ColorConfig, LUTConfig, ExposureLockConfig dataclasses and add color preset loaders to preset_loader.py.

## Tasks Completed

| Task | Name | Status | Files Modified |
|------|------|--------|----------------|
| 1 | Add ColorConfig, LUTConfig, ExposureLockConfig to types.py | Complete | lib/cinematic/types.py |
| 2 | Add ViewTransform enum to enums.py | Complete | lib/cinematic/enums.py |
| 3 | Add color preset loaders to preset_loader.py | Complete | lib/cinematic/preset_loader.py |

## Implementation Details

### Task 1: Dataclasses

Added three new dataclasses to `lib/cinematic/types.py` following the established pattern:

**ColorConfig:**
- `view_transform: str = "AgX"` - Blender view transform option
- `exposure: float = 0.0` - Global exposure adjustment
- `gamma: float = 1.0` - Gamma correction
- `look: str = "None"` - Color look preset
- `display_device: str = "sRGB"` - Output display device
- `working_color_space: str = "AgX"` - Scene linear color space

**LUTConfig:**
- `name: str = ""` - Preset name
- `lut_path: str = ""` - Path to .cube file
- `intensity: float = 0.8` - Blend intensity (REQ-CINE-LUT default)
- `enabled: bool = True` - LUT activation
- `lut_type: str = "creative"` - Category (technical, film, creative)
- `precision: int = 33` - LUT resolution (33 for film, 65 for technical)

**ExposureLockConfig:**
- `enabled: bool = False` - Auto-exposure lock activation
- `target_gray: float = 0.18` - 18% gray targeting
- `highlight_protection: float = 0.95` - Maximum highlight value
- `shadow_protection: float = 0.02` - Minimum shadow value

### Task 2: Enums

Added two new enums to `lib/cinematic/enums.py`:

**ViewTransform (str, Enum):**
- STANDARD = "Standard"
- AGX = "AgX"
- FILMIC = "Filmic"
- FILMIC_LOG = "Filmic Log"
- RAW = "Raw"
- LOG = "Log"
- ACESCG = "ACEScg"

**WorkingColorSpace (str, Enum):**
- AGX = "AgX"
- ACESCG = "ACEScg"
- FILMIC = "Filmic"
- STANDARD = "Standard"

### Task 3: Preset Loaders

Added color system preset loaders to `lib/cinematic/preset_loader.py`:

**New constant:**
- `COLOR_CONFIG_ROOT = Path("configs/cinematic/color")`

**Functions:**
- `get_color_preset(name)` - Load from color_management_presets.yaml
- `get_technical_lut_preset(name)` - Load from technical_luts.yaml
- `get_film_lut_preset(name)` - Load from film_luts.yaml
- `list_color_presets()` - List available color presets
- `list_technical_lut_presets()` - List available technical LUTs
- `list_film_lut_presets()` - List available film LUTs

## Key Files Created/Modified

| File | Lines Added | Purpose |
|------|-------------|---------|
| lib/cinematic/types.py | +131 | ColorConfig, LUTConfig, ExposureLockConfig dataclasses |
| lib/cinematic/enums.py | +29 | ViewTransform, WorkingColorSpace enums |
| lib/cinematic/preset_loader.py | +139 | Color preset loader functions |

## Decisions Made

| Decision | Rationale |
|----------|-----------|
| LUTConfig.intensity default = 0.8 | Per REQ-CINE-LUT requirements |
| ExposureLockConfig.target_gray = 0.18 | 18% gray standard |
| ViewTransform inherits from str, Enum | Allows string comparison and value access |
| COLOR_CONFIG_ROOT in preset_loader.py | Consistent with existing pattern for LIGHTING_CONFIG_ROOT and BACKDROP_CONFIG_ROOT |

## Verification Results

All verification commands passed:

```bash
# Task 1 verification
grep -c "class ColorConfig" lib/cinematic/types.py       # 1
grep -c "class LUTConfig" lib/cinematic/types.py         # 1
grep -c "class ExposureLockConfig" lib/cinematic/types.py # 1

# Task 2 verification
grep -c "class ViewTransform" lib/cinematic/enums.py     # 1
grep -c "class WorkingColorSpace" lib/cinematic/enums.py # 1

# Task 3 verification
grep -c "def get_color_preset" lib/cinematic/preset_loader.py         # 1
grep -c "def get_technical_lut_preset" lib/cinematic/preset_loader.py # 1
grep -c "def get_film_lut_preset" lib/cinematic/preset_loader.py      # 1
grep -c "COLOR_CONFIG_ROOT" lib/cinematic/preset_loader.py            # 7
```

## Next Phase Readiness

**Ready for:** 06.4-02 (Color Management Module)

The types, enums, and preset loaders are now in place for the color.py module implementation.

## Duration

Started: 2026-02-19T03:20:41Z
Completed: 2026-02-19T03:25:00Z
Duration: ~5 minutes

## Commit

```
ac70792 feat(color): add ColorConfig, LUTConfig, ExposureLockConfig types (Phase 6.4)
```

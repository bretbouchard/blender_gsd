---
phase: 06.4-color-pipeline
plan: 03
type: execute
wave: 3
depends_on: ["06.4-02"]
files_modified:
  - lib/cinematic/__init__.py
autonomous: true
user_setup: []

must_haves:
  truths:
    - "ColorConfig is exported from lib.cinematic"
    - "LUTConfig is exported from lib.cinematic"
    - "ExposureLockConfig is exported from lib.cinematic"
    - "ViewTransform enum is exported from lib.cinematic"
    - "Color functions are exported from lib.cinematic"
    - "Package version is bumped to 0.1.4"
  artifacts:
    - path: "lib/cinematic/__init__.py"
      provides: "Package exports"
      contains: '"ColorConfig"'
      contains: '"LUTConfig"'
      contains: '"set_view_transform"'
    - path: "lib/cinematic/__init__.py"
      provides: "Version string"
      contains: '__version__ = "0.1.4"'
  key_links:
    - from: "lib/cinematic/__init__.py"
      to: "lib/cinematic/color.py"
      via: "from .color import"
      pattern: "from .color import"
    - from: "lib/cinematic/__init__.py"
      to: "lib/cinematic/preset_loader.py"
      via: "from .preset_loader import"
      pattern: "get_color_preset"
---

<objective>
Update lib/cinematic/__init__.py with all color module exports and bump version to 0.1.4.

Purpose: Make the color pipeline system accessible via the main package import and track the version increment for this completed subsystem.

Output: Updated __init__.py with all color exports and version 0.1.4.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plans
@.planning/phases/06.4-color-pipeline/06.4-01-PLAN.md
@.planning/phases/06.4-color-pipeline/06.4-02-PLAN.md

# Existing patterns
@lib/cinematic/__init__.py
@lib/cinematic/color.py
@lib/cinematic/types.py
@lib/cinematic/preset_loader.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add color module imports to __init__.py</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update lib/cinematic/__init__.py to export the color module components.

**1. Add imports from types.py (extend existing import block):**
Add ColorConfig, LUTConfig, ExposureLockConfig to the existing from .types import block:
```python
from .types import (
    Transform3D,
    CameraConfig,
    LightConfig,
    BackdropConfig,
    RenderSettings,
    ShotState,
    PlumbBobConfig,
    RigConfig,
    ImperfectionConfig,
    MultiCameraLayout,
    # Lighting types
    GelConfig,
    HDRIConfig,
    LightRigConfig,
    # Color types
    ColorConfig,
    LUTConfig,
    ExposureLockConfig,
)
```

**2. Add ViewTransform to enums import:**
Add ViewTransform to the existing from .enums import block:
```python
from .enums import (
    LensType,
    LightType,
    QualityTier,
    ColorSpace,
    EasingType,
    AreaLightShape,
    # Color enum
    ViewTransform,
)
```

**3. Add color preset loaders to preset_loader import:**
Add color preset loaders to the existing from .preset_loader import block:
```python
    # Backdrop preset loaders
    get_infinite_curve_preset,
    get_gradient_preset,
    get_environment_preset,
    list_infinite_curve_presets,
    list_gradient_presets,
    list_environment_presets,
    # Color preset loaders
    get_color_preset,
    get_technical_lut_preset,
    get_film_lut_preset,
    list_color_presets,
    list_technical_lut_presets,
    list_film_lut_presets,
)
```

**4. Add color module import:**
Add after the backdrops import:
```python
from .color import (
    set_view_transform,
    apply_color_preset,
    get_current_color_settings,
    reset_color_settings,
    get_available_looks,
    validate_lut_file,
    find_lut_path,
    load_lut_config,
    list_available_luts,
    calculate_auto_exposure,
    apply_exposure_lock,
    set_exposure,
    set_gamma,
    get_exposure_range,
    get_gamma_range,
)
```
  </action>
  <verify>
grep -c "ColorConfig" lib/cinematic/__init__.py && \
grep -c "LUTConfig" lib/cinematic/__init__.py && \
grep -c "ExposureLockConfig" lib/cinematic/__init__.py && \
grep -c "ViewTransform" lib/cinematic/__init__.py && \
grep -c "from .color import" lib/cinematic/__init__.py
  </verify>
  <done>
Color types, enums, and functions are imported in __init__.py.
</done>
</task>

<task type="auto">
  <name>Task 2: Add color exports to __all__ list</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update the __all__ list in lib/cinematic/__init__.py to include all color exports.

Add the following entries to the __all__ list (maintain alphabetical-ish order within sections):

**In the Core types section (after LightRigConfig):**
```python
    # Color types
    "ColorConfig",
    "LUTConfig",
    "ExposureLockConfig",
```

**In the Enums section (after AreaLightShape):**
```python
    # Color enum
    "ViewTransform",
```

**In the Preset loading section (after list_environment_presets):**
```python
    # Color preset loaders
    "get_color_preset",
    "get_technical_lut_preset",
    "get_film_lut_preset",
    "list_color_presets",
    "list_technical_lut_presets",
    "list_film_lut_presets",
```

**Add new Color functions section (after Backdrop functions):**
```python
    # Color functions
    "set_view_transform",
    "apply_color_preset",
    "get_current_color_settings",
    "reset_color_settings",
    "get_available_looks",
    "validate_lut_file",
    "find_lut_path",
    "load_lut_config",
    "list_available_luts",
    "calculate_auto_exposure",
    "apply_exposure_lock",
    "set_exposure",
    "set_gamma",
    "get_exposure_range",
    "get_gamma_range",
```
  </action>
  <verify>
grep -c '"ColorConfig"' lib/cinematic/__init__.py && \
grep -c '"set_view_transform"' lib/cinematic/__init__.py && \
grep -c '"validate_lut_file"' lib/cinematic/__init__.py && \
grep -c '"calculate_auto_exposure"' lib/cinematic/__init__.py
  </verify>
  <done>
All color exports are in the __all__ list.
</done>
</task>

<task type="auto">
  <name>Task 3: Update package version and docstring</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Update the package version and docstring in lib/cinematic/__init__.py.

**1. Update module docstring to include color module:**
Add to the Modules list in the docstring:
```python
- color: Color management, LUT validation, and exposure lock
```

Add to the Quick Start example:
```python
    # Set color management
    from lib.cinematic import (
        ColorConfig, LUTConfig, ExposureLockConfig, ViewTransform,
        set_view_transform, apply_color_preset,
        validate_lut_file, apply_exposure_lock,
    )

    # Apply color preset
    apply_color_preset("agx_default")

    # Validate LUT file
    valid, error = validate_lut_file(Path("luts/kodak_2383.cube"), 33)
```

**2. Update __version__ to 0.1.4:**
Change the version at the bottom of the file:
```python
__version__ = "0.1.4"
```

This version bump indicates completion of the Color Pipeline subsystem (Phase 6.4).
  </action>
  <verify>
grep "__version__ = \"0.1.4\"" lib/cinematic/__init__.py
  </verify>
  <done>
Package version is 0.1.4 and docstring includes color module.
</done>
</task>

<task type="auto">
  <name>Task 4: Verify package imports correctly</name>
  <files>lib/cinematic/__init__.py</files>
  <action>
Verify the package can be imported and all exports are accessible.

Run Python import test:
```bash
cd /Users/bretbouchard/apps/blender_gsd && python3 -c "
from lib.cinematic import (
    ColorConfig, LUTConfig, ExposureLockConfig, ViewTransform,
    set_view_transform, apply_color_preset,
    get_current_color_settings, reset_color_settings,
    validate_lut_file, find_lut_path, load_lut_config,
    list_available_luts, calculate_auto_exposure, apply_exposure_lock,
    set_exposure, set_gamma, get_exposure_range, get_gamma_range,
    get_color_preset, get_technical_lut_preset, get_film_lut_preset,
    list_color_presets, list_technical_lut_presets, list_film_lut_presets,
)
print('All color exports imported successfully')
print(f'ColorConfig: {ColorConfig}')
print(f'ViewTransform values: {[e.value for e in ViewTransform]}')
"
```

This verifies:
1. All types are importable
2. All enums are importable
3. All functions are importable
4. No circular imports or syntax errors
  </action>
  <verify>
python3 -c "from lib.cinematic import ColorConfig, LUTConfig, ExposureLockConfig, ViewTransform; print('OK')"
  </verify>
  <done>
Package imports successfully with all color exports.
</done>
</task>

</tasks>

<verification>
1. Verify __init__.py imports all color types, enums, and functions
2. Verify __all__ list contains all color exports
3. Verify version is 0.1.4
4. Verify Python can import the package without errors
</verification>

<success_criteria>
- ColorConfig, LUTConfig, ExposureLockConfig are exported from lib.cinematic
- ViewTransform enum is exported from lib.cinematic
- All color preset loaders are exported (get_color_preset, get_technical_lut_preset, get_film_lut_preset)
- All color functions are exported (set_view_transform, apply_color_preset, validate_lut_file, etc.)
- Package version is 0.1.4
- Python import test passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06.4-color-pipeline/06.4-03-SUMMARY.md`
</output>

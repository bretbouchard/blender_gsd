# Video ID: jbXaFtq52Mw
# URL: https://youtube.com/watch?v=jbXaFtq52Mw

If you came here to have a bunch of If you came here to have a bunch of If you came here to have a bunch of points like swirl around each other like points like swirl around each other like points like swirl around each other like it's some sort of fluid and there's it's some sort of fluid and there's it's some sort of fluid and there's vortices and blah blah blah, you came to vortices and blah blah blah, you came to vortices and blah blah blah, you came to the right place. But there is a cost to the right place. But there is a cost to the right place. But there is a cost to getting this very cool effect and that getting this very cool effect and that getting this very cool effect and that is a lot of confusion. A lot of math and is a lot of confusion. A lot of math and is a lot of confusion. A lot of math and a lot of confusion. The idea of this a lot of confusion. The idea of this a lot of confusion. The idea of this tutorial is going to be called curl. So tutorial is going to be called curl. So tutorial is going to be called curl. So what you're going to be learning is what you're going to be learning is what you're going to be learning is curl. Get ready to learn curl. This curl. Get ready to learn curl. This curl. Get ready to learn curl. This video is sponsored by Squarespace and video is sponsored by Squarespace and video is sponsored by Squarespace and we're going to talk about that later. I we're going to talk about that later. I we're going to talk about that later. I want you to imagine we have a grid of want you to imagine we have a grid of want you to imagine we have a grid of points which we know how to make. I'm points which we know how to make. I'm points which we know how to make. I'm going to make a grid right here. So going to make a grid right here. So going to make a grid right here. So let's say we have a 100 by 100 points. let's say we have a 100 by 100 points. let's say we have a 100 by 100 points. That's 10,000. These in themselves need That's 10,000. These in themselves need That's 10,000. These in themselves need to be points, not vertices as part of a to be points, not vertices as part of a to be points, not vertices as part of a geometry. And I want you to imagine that geometry. And I want you to imagine that geometry. And I want you to imagine that I take these points and I want to move I take these points and I want to move I take these points and I want to move them on every single frame. The way I them on every single frame. The way I them on every single frame. The way I would approach that is I would add a would approach that is I would add a would approach that is I would add a simulation zone that update can be simulation zone that update can be simulation zone that update can be moving the points. So let's set position moving the points. So let's set position moving the points. So let's set position by some offset, which I'm going to use a by some offset, which I'm going to use a by some offset, which I'm going to use a noise texture for. Turn off normalize. noise texture for. Turn off normalize. noise texture for. Turn off normalize. When I do that, it's crazy. We do the When I do that, it's crazy. We do the When I do that, it's crazy. We do the next logical thing. We take this, we next logical thing. We take this, we next logical thing. We take this, we scale it such that maybe it's only scale it such that maybe it's only scale it such that maybe it's only moving 1% as strong as it was. And moving 1% as strong as it was. And moving 1% as strong as it was. And you're going to see there's all of this you're going to see there's all of this you're going to see there's all of this bunching. And that is going to be the bunching. And that is going to be the bunching. And that is going to be the thing we are combating here. So the thing we are combating here. So the thing we are combating here. So the points, they swirl kind of, but they points, they swirl kind of, but they points, they swirl kind of, but they eventually over time kind of go into eventually over time kind of go into eventually over time kind of go into these lines. This cluster over here, for these lines. This cluster over here, for these lines. This cluster over here, for example, is going to shrink to a single example, is going to shrink to a single example, is going to shrink to a single point over time. There's some areas that point over time. There's some areas that point over time. There's some areas that are repelling. So if I look at this area are repelling. So if I look at this area are repelling. So if I look at this area over here, it just kind of expands over here, it just kind of expands over here, it just kind of expands outwards. And this is what we call outwards. And this is what we call outwards. And this is what we call syncs, which means points moving into an syncs, which means points moving into an syncs, which means points moving into an area and sources or emitters, points area and sources or emitters, points area and sources or emitters, points moving far away from it. To get a curl moving far away from it. To get a curl moving far away from it. To get a curl field, everything moving around each field, everything moving around each field, everything moving around each other, we need to take the divergence, other, we need to take the divergence, other, we need to take the divergence, which is saying, is there a sync? Is which is saying, is there a sync? Is which is saying, is there a sync? Is there a source? And we need to get rid there a source? And we need to get rid there a source? And we need to get rid of it. This tutorial is about that. How of it. This tutorial is about that. How of it. This tutorial is about that. How do we get rid of divergence so that do we get rid of divergence so that do we get rid of divergence so that everything swirls? It avoids each other everything swirls? It avoids each other everything swirls? It avoids each other rather than shrinking or emitting, rather than shrinking or emitting, rather than shrinking or emitting, expanding. I want you to imagine we have expanding. I want you to imagine we have expanding. I want you to imagine we have a vector field V. In this case, we used a vector field V. In this case, we used a vector field V. In this case, we used V as like a noise texture and that in V as like a noise texture and that in V as like a noise texture and that in itself is composed of a X component, Y itself is composed of a X component, Y itself is composed of a X component, Y component and Z component. What I want component and Z component. What I want component and Z component. What I want to do is I want to create something to do is I want to create something to do is I want to create something called a curl field, which is this. called a curl field, which is this. called a curl field, which is this. Yikes. This notation, what it means is Yikes. This notation, what it means is Yikes. This notation, what it means is we are calculating the curl. This kind we are calculating the curl. This kind we are calculating the curl. This kind of like swirly thing we're trying to of like swirly thing we're trying to of like swirly thing we're trying to achieve of V. It's actually the achieve of V. It's actually the achieve of V. It's actually the determinant of a matrix with derivatives determinant of a matrix with derivatives determinant of a matrix with derivatives and components. And I want you to ignore and components. And I want you to ignore and components. And I want you to ignore that. This can be simplified to a very that. This can be simplified to a very that. This can be simplified to a very much more simple version. It looks much more simple version. It looks much more simple version. It looks longer but it is simpler. So again the longer but it is simpler. So again the longer but it is simpler. So again the curl of a field is now composed of three curl of a field is now composed of three curl of a field is now composed of three components. An x component, a y components. An x component, a y components. An x component, a y component and a z component. So for the component and a z component. So for the component and a z component. So for the x component for example all we have to x component for example all we have to x component for example all we have to do is we take our vector field v. We do is we take our vector field v. We do is we take our vector field v. We isolate the z component and I check how isolate the z component and I check how isolate the z component and I check how does that change as y changes. I take does that change as y changes. I take does that change as y changes. I take that I subtract it from the y component that I subtract it from the y component that I subtract it from the y component and I ask how does that change relative and I ask how does that change relative and I ask how does that change relative to z. And and don't get me wrong I to z. And and don't get me wrong I to z. And and don't get me wrong I understand this is confusing. If you're understand this is confusing. If you're understand this is confusing. If you're confused this isn't like an advanced confused this isn't like an advanced confused this isn't like an advanced Khan Academy video. Remember, our goal Khan Academy video. Remember, our goal Khan Academy video. Remember, our goal is to take a bunch of points on a 2D is to take a bunch of points on a 2D is to take a bunch of points on a 2D plane and swirl them around each other. plane and swirl them around each other. plane and swirl them around each other. It is constricted to a two-dimensional It is constricted to a two-dimensional It is constricted to a two-dimensional thing, which means we can take our curl thing, which means we can take our curl thing, which means we can take our curl and assume that the output needs to also and assume that the output needs to also and assume that the output needs to also be two dimensional, which is a major be two dimensional, which is a major be two dimensional, which is a major saving. If we only want a x and a y saving. If we only want a x and a y saving. If we only want a x and a y component, what that means is that the component, what that means is that the component, what that means is that the curl has to have a z component over here curl has to have a z component over here curl has to have a z component over here of zero. That way, there's only an x and of zero. That way, there's only an x and of zero. That way, there's only an x and a y. And one very simple way to do that a y. And one very simple way to do that a y. And one very simple way to do that is we assume that the y component of our is we assume that the y component of our is we assume that the y component of our vector field and the x component of our vector field and the x component of our vector field and the x component of our vector field are always zero. That way vector field are always zero. That way vector field are always zero. That way the derivative is zero and it subtracts the derivative is zero and it subtracts the derivative is zero and it subtracts out to be zero. We get rid of all this. out to be zero. We get rid of all this. out to be zero. We get rid of all this. We also look at this y component section We also look at this y component section We also look at this y component section over here. We see there's a x component over here. We see there's a x component over here. We see there's a x component over here. We can get rid of that. And over here. We can get rid of that. And over here. We can get rid of that. And we see a y component over here. And we we see a y component over here. And we we see a y component over here. And we can get rid of all of that. Super super can get rid of all of that. Super super can get rid of all of that. Super super long story short. If we pick a vector long story short. If we pick a vector long story short. If we pick a vector field v that could be a noise whatever field v that could be a noise whatever field v that could be a noise whatever such that it only has a z component. no such that it only has a z component. no such that it only has a z component. no x or y. We can easily take this magical x or y. We can easily take this magical x or y. We can easily take this magical curl thing and it will be equal to curl thing and it will be equal to curl thing and it will be equal to something very simple. Okay, now let's something very simple. Okay, now let's something very simple. Okay, now let's get to stuff we kind of understand. Geo get to stuff we kind of understand. Geo get to stuff we kind of understand. Geo nodes land. We need to first of all have nodes land. We need to first of all have nodes land. We need to first of all have a noise that only has a Z component as a noise that only has a Z component as a noise that only has a Z component as we talked about. So I'm going to take a we talked about. So I'm going to take a we talked about. So I'm going to take a noise texture node. Super simple. And I noise texture node. Super simple. And I noise texture node. Super simple. And I want this to only have a Z component. So want this to only have a Z component. So want this to only have a Z component. So I'm going to take the color which has I'm going to take the color which has I'm going to take the color which has XYZ, red, green, blue, and I'm going to XYZ, red, green, blue, and I'm going to XYZ, red, green, blue, and I'm going to multiply it by 0 01. So, in other words, multiply it by 0 01. So, in other words, multiply it by 0 01. So, in other words, this takes in a position and it will this takes in a position and it will this takes in a position and it will send it to something with only a Z send it to something with only a Z send it to something with only a Z component. Now, because we're going to component. Now, because we're going to component. Now, because we're going to be using this all the time, I'm going to be using this all the time, I'm going to be using this all the time, I'm going to turn this into a node group. Yes, we can turn this into a node group. Yes, we can turn this into a node group. Yes, we can use the new bundles and closures, but use the new bundles and closures, but use the new bundles and closures, but let's keep it not having another complex let's keep it not having another complex let's keep it not having another complex thing. Ctrl G to make it a node group. thing. Ctrl G to make it a node group. thing. Ctrl G to make it a node group. It's going to output this vector over It's going to output this vector over It's going to output this vector over here. And by the way, I'm using 5.0, here. And by the way, I'm using 5.0, here. And by the way, I'm using 5.0, which is why it has this nice new which is why it has this nice new which is why it has this nice new design. Maybe let's just call it V. design. Maybe let's just call it V. design. Maybe let's just call it V. Super simple. In other words, we have Super simple. In other words, we have Super simple. In other words, we have achieved this. Beautiful. Remember, the achieved this. Beautiful. Remember, the achieved this. Beautiful. Remember, the next thing we need to do is compute the next thing we need to do is compute the next thing we need to do is compute the curl of this special case. And we know curl of this special case. And we know curl of this special case. And we know all we need to do is take the derivative all we need to do is take the derivative all we need to do is take the derivative of this with respect to y with respect of this with respect to y with respect of this with respect to y with respect to x and then for some reason make the x to x and then for some reason make the x to x and then for some reason make the x negative. So how do we take the negative. So how do we take the negative. So how do we take the derivative of this with respect to y? derivative of this with respect to y? derivative of this with respect to y? Well, I want you to imagine this Well, I want you to imagine this Well, I want you to imagine this represents our vector field. It's dark represents our vector field. It's dark represents our vector field. It's dark in some places, it's bright in others. in some places, it's bright in others. in some places, it's bright in others. So for example, let's say we're sampling So for example, let's say we're sampling So for example, let's say we're sampling at this point here. To kind of get the at this point here. To kind of get the at this point here. To kind of get the slope or the derivative of it, all I slope or the derivative of it, all I slope or the derivative of it, all I need to do is kind of nudge it a little need to do is kind of nudge it a little need to do is kind of nudge it a little bit in this direction. I evaluate it. So bit in this direction. I evaluate it. So bit in this direction. I evaluate it. So now I have our initial point and one now I have our initial point and one now I have our initial point and one where I moved it a little. That's going where I moved it a little. That's going where I moved it a little. That's going to have some difference. and then I to have some difference. and then I to have some difference. and then I divide it by this gap over here. If you divide it by this gap over here. If you divide it by this gap over here. If you think of this as kind of like a think of this as kind of like a think of this as kind of like a landscape that goes up and down as I landscape that goes up and down as I landscape that goes up and down as I sample position along the y. If I want sample position along the y. If I want sample position along the y. If I want to know the derivative right here, which to know the derivative right here, which to know the derivative right here, which is going to tell us the slope, right? is going to tell us the slope, right? is going to tell us the slope, right? Like is that going downhill or uphill? Like is that going downhill or uphill? Like is that going downhill or uphill? The way we approximate this cuz we don't The way we approximate this cuz we don't The way we approximate this cuz we don't know it exactly. I look at this point know it exactly. I look at this point know it exactly. I look at this point over here. I sample one really, really over here. I sample one really, really over here. I sample one really, really close. I look at their difference in close. I look at their difference in close. I look at their difference in value, how much it went up or down. I value, how much it went up or down. I value, how much it went up or down. I then look at how much of a nudge I did. then look at how much of a nudge I did. then look at how much of a nudge I did. And then you divide the two. That will And then you divide the two. That will And then you divide the two. That will give you the slope of a line that will give you the slope of a line that will give you the slope of a line that will very very well approximate that uh very very well approximate that uh very very well approximate that uh derivative. And we can do that on x and derivative. And we can do that on x and derivative. And we can do that on x and on y. Easy money. I'm going to take on y. Easy money. I'm going to take on y. Easy money. I'm going to take this. I'm going to duplicate it. This this. I'm going to duplicate it. This this. I'm going to duplicate it. This one instead of having the position, I'm one instead of having the position, I'm one instead of having the position, I'm going to nudge it a little on the x. So going to nudge it a little on the x. So going to nudge it a little on the x. So I am going to add a very tiny number I am going to add a very tiny number I am going to add a very tiny number like 01. So this v is the vector field. like 01. So this v is the vector field. like 01. So this v is the vector field. And then this v over here represents the And then this v over here represents the And then this v over here represents the vector field when we nudged it a little vector field when we nudged it a little vector field when we nudged it a little bit. We now take the difference, how bit. We now take the difference, how bit. We now take the difference, how much did it change, which is going to be much did it change, which is going to be much did it change, which is going to be some value. And then we divide by how some value. And then we divide by how some value. And then we divide by how much did we move which will give us that much did we move which will give us that much did we move which will give us that nice slope. What do we divide by? We nice slope. What do we divide by? We nice slope. What do we divide by? We divide by however much we shifted it. So divide by however much we shifted it. So divide by however much we shifted it. So in this case it's 0.001. in this case it's 0.001. in this case it's 0.001. And this output over here is the And this output over here is the And this output over here is the derivative with respect to x. So we are derivative with respect to x. So we are derivative with respect to x. So we are done. So let's get the one with respect done. So let's get the one with respect done. So let's get the one with respect to y. It's just a simple right. So I'm to y. It's just a simple right. So I'm to y. It's just a simple right. So I'm going to take another one of these over going to take another one of these over going to take another one of these over here. I'm going to again nudge the here. I'm going to again nudge the here. I'm going to again nudge the position but this time just moving it a position but this time just moving it a position but this time just moving it a little on the y-axis and set this to little on the y-axis and set this to little on the y-axis and set this to zero. And to get the derivative with zero. And to get the derivative with zero. And to get the derivative with respect to y, we take our original respect to y, we take our original respect to y, we take our original vector field. We subtract by what vector field. We subtract by what vector field. We subtract by what happened when we nudged it just a little happened when we nudged it just a little happened when we nudged it just a little on the y-axis. And then finally, we on the y-axis. And then finally, we on the y-axis. And then finally, we divide by how much of a gap we moved by. divide by how much of a gap we moved by. divide by how much of a gap we moved by. Now, let's do our victory lap. I'm going Now, let's do our victory lap. I'm going Now, let's do our victory lap. I'm going to take all of this and turn it into a to take all of this and turn it into a to take all of this and turn it into a node group. I want to know the x node group. I want to know the x node group. I want to know the x derivative and the y derivative of our derivative and the y derivative of our derivative and the y derivative of our vector field that only has a z vector field that only has a z vector field that only has a z component. It's fine. And we can call component. It's fine. And we can call component. It's fine. And we can call this new node group maybe our this new node group maybe our this new node group maybe our derivatives. The nice thing about this, derivatives. The nice thing about this, derivatives. The nice thing about this, and this is kind of like how closures and this is kind of like how closures and this is kind of like how closures work, but we're not going to do that work, but we're not going to do that work, but we're not going to do that yet, is if I go into my vector field V, yet, is if I go into my vector field V, yet, is if I go into my vector field V, I can change the noise however much I I can change the noise however much I I can change the noise however much I want, and it's going to update these want, and it's going to update these want, and it's going to update these derivatives. I guess one modification I derivatives. I guess one modification I derivatives. I guess one modification I want to make is remember our vector want to make is remember our vector want to make is remember our vector field, whatever it may be, only has a Z field, whatever it may be, only has a Z field, whatever it may be, only has a Z component, which means when we subtract component, which means when we subtract component, which means when we subtract by stuff and divide by stuff, it's going by stuff and divide by stuff, it's going by stuff and divide by stuff, it's going to be something, but it's still only to be something, but it's still only to be something, but it's still only going to be a Z component. Maybe I can going to be a Z component. Maybe I can going to be a Z component. Maybe I can just separate XYZ, giving this Z just separate XYZ, giving this Z just separate XYZ, giving this Z component, cuz that's all we care about component, cuz that's all we care about component, cuz that's all we care about ultimately. And then I'm going to take ultimately. And then I'm going to take ultimately. And then I'm going to take these and turn them into floats so that these and turn them into floats so that these and turn them into floats so that we're saying I already isolated the Z we're saying I already isolated the Z we're saying I already isolated the Z component. Okay, beautiful. We're ready component. Okay, beautiful. We're ready component. Okay, beautiful. We're ready to construct the curl field. The sponsor to construct the curl field. The sponsor to construct the curl field. The sponsor of this video is Squarespace and that's of this video is Squarespace and that's of this video is Squarespace and that's actually on the mind for me because over actually on the mind for me because over actually on the mind for me because over the last week I've been doing a overhaul the last week I've been doing a overhaul the last week I've been doing a overhaul redesign of my website cggatter.com so redesign of my website cggatter.com so redesign of my website cggatter.com so that it's better for members and has that it's better for members and has that it's better for members and has like free nodes now. It also has a blog like free nodes now. It also has a blog like free nodes now. It also has a blog that talks about how I worked for that talks about how I worked for that talks about how I worked for Corridor Digital for like 2 weeks if you Corridor Digital for like 2 weeks if you Corridor Digital for like 2 weeks if you want to read that. and that redesign want to read that. and that redesign want to read that. and that redesign process was super easy to do because of process was super easy to do because of process was super easy to do because of Squarespace's features and just UI. Some Squarespace's features and just UI. Some Squarespace's features and just UI. Some things to know is that they have a things to know is that they have a things to know is that they have a payment platform integrated right into payment platform integrated right into payment platform integrated right into the service. So, if you have a digital the service. So, if you have a digital the service. So, if you have a digital product or a member site, you don't need product or a member site, you don't need product or a member site, you don't need to outsource payment. It can all be done to outsource payment. It can all be done to outsource payment. It can all be done in one convenient place. And then for in one convenient place. And then for in one convenient place. And then for assets being images, videos, whatever it assets being images, videos, whatever it assets being images, videos, whatever it might be, Squarespace comes with an might be, Squarespace comes with an might be, Squarespace comes with an asset library. So, you can again put it asset library. So, you can again put it asset library. So, you can again put it all in one place. Thirdly, if you're all in one place. Thirdly, if you're all in one place. Thirdly, if you're writing I I guess it depends on you, but writing I I guess it depends on you, but writing I I guess it depends on you, but for example, if I'm writing for example, if I'm writing for example, if I'm writing documentation, Squarespace has documentation, Squarespace has documentation, Squarespace has integrated AI that can fill in the integrated AI that can fill in the integrated AI that can fill in the details that I know what is correct and details that I know what is correct and details that I know what is correct and then I can quickly verify. You can just then I can quickly verify. You can just then I can quickly verify. You can just head over to Squarespace and make a head over to Squarespace and make a head over to Squarespace and make a website. And when you want to launch it website. And when you want to launch it website. And when you want to launch it and make it live, you can use this link and make it live, you can use this link and make it live, you can use this link below in the description to save 10% off below in the description to save 10% off below in the description to save 10% off your first purchase of a website or your first purchase of a website or your first purchase of a website or domain. Made it very easy to redesign domain. Made it very easy to redesign domain. Made it very easy to redesign cg.com. So remember, we combine XYZ. cg.com. So remember, we combine XYZ. cg.com. So remember, we combine XYZ. Let's look at it one more time. So it's Let's look at it one more time. So it's Let's look at it one more time. So it's the derivative with respect to y and the derivative with respect to y and the derivative with respect to y and then minus with respect to x with then minus with respect to x with then minus with respect to x with respect to y. Can really get lost here respect to y. Can really get lost here respect to y. Can really get lost here with all these x's and y's and with all these x's and y's and with all these x's and y's and derivatives but whatever minus. So I'm derivatives but whatever minus. So I'm derivatives but whatever minus. So I'm going to multiply this by negative 1 going to multiply this by negative 1 going to multiply this by negative 1 with respect to x and then remember the with respect to x and then remember the with respect to x and then remember the z component is zero because all of this z component is zero because all of this z component is zero because all of this is going to be the curl of v. We are is going to be the curl of v. We are is going to be the curl of v. We are done. So let's take all this make it a done. So let's take all this make it a done. So let's take all this make it a node group and I'm going to call all of node group and I'm going to call all of node group and I'm going to call all of this curl which I guess should output this curl which I guess should output this curl which I guess should output the vector. So long long long story the vector. So long long long story the vector. So long long long story short, we have a vector field V and short, we have a vector field V and short, we have a vector field V and whatever we do to it, however we modify whatever we do to it, however we modify whatever we do to it, however we modify it, which I'm going to disable normalize it, which I'm going to disable normalize it, which I'm going to disable normalize just so it's like centered. Whatever we just so it's like centered. Whatever we just so it's like centered. Whatever we do to this, change the scale, whatever, do to this, change the scale, whatever, do to this, change the scale, whatever, we now have a curl field for just X and we now have a curl field for just X and we now have a curl field for just X and Y. So maybe I'll call it curl XY. And Y. So maybe I'll call it curl XY. And Y. So maybe I'll call it curl XY. And now for the punch line, let's actually now for the punch line, let's actually now for the punch line, let's actually move these points and make some kind of move these points and make some kind of move these points and make some kind of artsy art. What could the art look like? artsy art. What could the art look like? artsy art. What could the art look like? Well, let's start off with a mesh grid. Well, let's start off with a mesh grid. Well, let's start off with a mesh grid. We already demoed this, so let's do 200 We already demoed this, so let's do 200 We already demoed this, so let's do 200 by 200. These need to be points, not by 200. These need to be points, not by 200. These need to be points, not vertices in a mesh. So, I'll turn these vertices in a mesh. So, I'll turn these vertices in a mesh. So, I'll turn these into points, which we can make much into points, which we can make much into points, which we can make much smaller so we can see them. So, just smaller so we can see them. So, just smaller so we can see them. So, just tiny radius. I think something like this tiny radius. I think something like this tiny radius. I think something like this is much nicer to uh look at. So, I have is much nicer to uh look at. So, I have is much nicer to uh look at. So, I have my points. And what do I want to do with my points. And what do I want to do with my points. And what do I want to do with them? I want to push them over time with them? I want to push them over time with them? I want to push them over time with a simulation zone. So, just like before, a simulation zone. So, just like before, a simulation zone. So, just like before, we have a simulation zone. We feed in we have a simulation zone. We feed in we have a simulation zone. We feed in the points, move those points on every the points, move those points on every the points, move those points on every single frame by what quantity, like how single frame by what quantity, like how single frame by what quantity, like how am I offsetting it? By our curl xy. And am I offsetting it? By our curl xy. And am I offsetting it? By our curl xy. And this in itself will swirl, but it's this in itself will swirl, but it's this in itself will swirl, but it's going to be chaotic. Like boom. I don't going to be chaotic. Like boom. I don't going to be chaotic. Like boom. I don't know if you can even see that. Probably know if you can even see that. Probably know if you can even see that. Probably not. It just kind of exploded. It is not. It just kind of exploded. It is not. It just kind of exploded. It is working. It's just really, really working. It's just really, really working. It's just really, really strong. We can scale it. In other words, strong. We can scale it. In other words, strong. We can scale it. In other words, make it smaller by either a really tiny make it smaller by either a really tiny make it smaller by either a really tiny number like 0.01, which in itself is number like 0.01, which in itself is number like 0.01, which in itself is still way too fast, or we can use delta still way too fast, or we can use delta still way too fast, or we can use delta time and multiply it by something up to time and multiply it by something up to time and multiply it by something up to you. I'm going to do 0.001. you. I'm going to do 0.001. you. I'm going to do 0.001. And even that's pretty fast moving. You And even that's pretty fast moving. You And even that's pretty fast moving. You can see it's starting to curl, but it can see it's starting to curl, but it can see it's starting to curl, but it still looks like it has that divergence. still looks like it has that divergence. still looks like it has that divergence. So, let's make it even 10 times slower. So, let's make it even 10 times slower. So, let's make it even 10 times slower. see what that looks like. And now I see what that looks like. And now I see what that looks like. And now I think you're starting to see it. Points think you're starting to see it. Points think you're starting to see it. Points aren't really bunching together or aren't really bunching together or aren't really bunching together or expanding, but rather they are swirling expanding, but rather they are swirling expanding, but rather they are swirling around each other in this way that around each other in this way that around each other in this way that preserves, I don't know, it preserves preserves, I don't know, it preserves preserves, I don't know, it preserves density in a way. There's zero density in a way. There's zero density in a way. There's zero divergence. The only thing that's kind divergence. The only thing that's kind divergence. The only thing that's kind of weird is we have some water, if you of weird is we have some water, if you of weird is we have some water, if you want to think about it that way, exiting want to think about it that way, exiting want to think about it that way, exiting the square system we started off with. the square system we started off with. the square system we started off with. Instead of 200 by 200, let's do 400 by Instead of 200 by 200, let's do 400 by Instead of 200 by 200, let's do 400 by 400. And now you can really start seeing 400. And now you can really start seeing 400. And now you can really start seeing that swirl. Look at that. So here you that swirl. Look at that. So here you that swirl. Look at that. So here you have like a vort a vortex of vorticy and have like a vort a vortex of vorticy and have like a vort a vortex of vorticy and it's really moving like water where it's really moving like water where it's really moving like water where everything pushes everything else everything pushes everything else everything pushes everything else instead of uh those sinks we talked instead of uh those sinks we talked instead of uh those sinks we talked about. Yeah. Outside of it you can see about. Yeah. Outside of it you can see about. Yeah. Outside of it you can see some nice like swirls forming and stuff some nice like swirls forming and stuff some nice like swirls forming and stuff like that. And remember um because we like that. And remember um because we like that. And remember um because we constructed it the way we did. All of constructed it the way we did. All of constructed it the way we did. All of this can be modified by just changing this can be modified by just changing this can be modified by just changing the vector field. So we can have it move the vector field. So we can have it move the vector field. So we can have it move differently. So if I choose a scale of differently. So if I choose a scale of differently. So if I choose a scale of 15, it's still going to work but now we 15, it's still going to work but now we 15, it's still going to work but now we have a bunch of tiny vortices that all have a bunch of tiny vortices that all have a bunch of tiny vortices that all kind of curl on each other. But note kind of curl on each other. But note kind of curl on each other. But note that because there's now more micro that because there's now more micro that because there's now more micro detail, those derivatives need to be detail, those derivatives need to be detail, those derivatives need to be more accurate. So inside of our curl, more accurate. So inside of our curl, more accurate. So inside of our curl, I'm going to go inside of our I'm going to go inside of our I'm going to go inside of our derivatives and maybe make this 0.001 derivatives and maybe make this 0.001 derivatives and maybe make this 0.001 number 10 times smaller. Gets a really number 10 times smaller. Gets a really number 10 times smaller. Gets a really good approximation here. So we change good approximation here. So we change good approximation here. So we change that, which means we also have to change that, which means we also have to change that, which means we also have to change these numbers over here. And we can these numbers over here. And we can these numbers over here. And we can mitigate that even more by taking how mitigate that even more by taking how mitigate that even more by taking how much it moves and scaling it down. Now, much it moves and scaling it down. Now, much it moves and scaling it down. Now, uh you're going to notice that while uh you're going to notice that while uh you're going to notice that while this works, we're going to get to the this works, we're going to get to the this works, we're going to get to the point where it's moving really, really point where it's moving really, really point where it's moving really, really slowly, which needs to be done to slowly, which needs to be done to slowly, which needs to be done to preserve the accuracy, but I want it to preserve the accuracy, but I want it to preserve the accuracy, but I want it to visually be faster. What if we take visually be faster. What if we take visually be faster. What if we take super small steps like we are doing super small steps like we are doing super small steps like we are doing right now, but we do multiple steps right now, but we do multiple steps right now, but we do multiple steps every frame? In other words, we're every frame? In other words, we're every frame? In other words, we're turning steps into substeps. Wouldn't turning steps into substeps. Wouldn't turning steps into substeps. Wouldn't that be nifty? Well, it would be nifty. that be nifty? Well, it would be nifty. that be nifty? Well, it would be nifty. So, let's actually do that. Throw in a So, let's actually do that. Throw in a So, let's actually do that. Throw in a repeat zone inside of here. So, for repeat zone inside of here. So, for repeat zone inside of here. So, for every frame, every simulation frame, I'm every frame, every simulation frame, I'm every frame, every simulation frame, I'm going to do an operation multiple times. going to do an operation multiple times. going to do an operation multiple times. Specifically, it's going to be this set Specifically, it's going to be this set Specifically, it's going to be this set position offsetting. The only thing I'm position offsetting. The only thing I'm position offsetting. The only thing I'm going to change is I'm going to make the going to change is I'm going to make the going to change is I'm going to make the step size super small cuz we can afford step size super small cuz we can afford step size super small cuz we can afford to. Now, for now, we're doing one to. Now, for now, we're doing one to. Now, for now, we're doing one iteration. It's going to be accurate, iteration. It's going to be accurate, iteration. It's going to be accurate, but so, so slow. So, let's do five but so, so slow. So, let's do five but so, so slow. So, let's do five iterations per frame. It's going to iterations per frame. It's going to iterations per frame. It's going to preserve that accuracy, but now on every preserve that accuracy, but now on every preserve that accuracy, but now on every frame, it's going to move more, but at frame, it's going to move more, but at frame, it's going to move more, but at the cost of more computation. It's at the cost of more computation. It's at the cost of more computation. It's at this point that we probably want to bake this point that we probably want to bake this point that we probably want to bake our simulation instead of kind of going our simulation instead of kind of going our simulation instead of kind of going frame by frame. So, simulation nodes, frame by frame. So, simulation nodes, frame by frame. So, simulation nodes, hit uh bake, and we'll let that do its hit uh bake, and we'll let that do its hit uh bake, and we'll let that do its thing. And just like that, we get a very thing. And just like that, we get a very thing. And just like that, we get a very accurate curl field where there's very, accurate curl field where there's very, accurate curl field where there's very, very minimal divergence. There's these very minimal divergence. There's these very minimal divergence. There's these nice swirls over here. And then what you nice swirls over here. And then what you nice swirls over here. And then what you do with it is the artistic part. I just do with it is the artistic part. I just do with it is the artistic part. I just wanted to talk about the technical part wanted to talk about the technical part wanted to talk about the technical part because jeez, it's complicated. And if because jeez, it's complicated. And if because jeez, it's complicated. And if we want to eventually make a fluid we want to eventually make a fluid we want to eventually make a fluid simulator, which we do because of the simulator, which we do because of the simulator, which we do because of the new grid 3D stuff, we're going to have new grid 3D stuff, we're going to have new grid 3D stuff, we're going to have to be using this curl. So turning this to be using this curl. So turning this to be using this curl. So turning this into a node group is critical. Before into a node group is critical. Before into a node group is critical. Before signing off here, let's take advantage signing off here, let's take advantage signing off here, let's take advantage of the fact that we have a algorithm, a of the fact that we have a algorithm, a of the fact that we have a algorithm, a recipe to take any vector field and make recipe to take any vector field and make recipe to take any vector field and make it a curl field. So let's take the noise it a curl field. So let's take the noise it a curl field. So let's take the noise and maybe replace it with something. I and maybe replace it with something. I and maybe replace it with something. I wonder what a wave texture would look wonder what a wave texture would look wonder what a wave texture would look like. And h I mean technically that's like. And h I mean technically that's like. And h I mean technically that's kind of interesting. If it's kind of kind of interesting. If it's kind of kind of interesting. If it's kind of going on a wave, the only way to avoid going on a wave, the only way to avoid going on a wave, the only way to avoid compression is by going outward. So compression is by going outward. So compression is by going outward. So notice these points are still flowing notice these points are still flowing notice these points are still flowing around each other. Let's do one that around each other. Let's do one that around each other. Let's do one that looks better though. Well, we have our looks better though. Well, we have our looks better though. Well, we have our magic texture which has more interesting magic texture which has more interesting magic texture which has more interesting like two dimensional stuff going on. So like two dimensional stuff going on. So like two dimensional stuff going on. So I'm just going to connect that here. I'm just going to connect that here. I'm just going to connect that here. Increase the depth. And nice diversions Increase the depth. And nice diversions Increase the depth. And nice diversions free flow while still kind of free flow while still kind of free flow while still kind of maintaining the shape of it. And it maintaining the shape of it. And it maintaining the shape of it. And it makes these cool like bands over here. makes these cool like bands over here. makes these cool like bands over here. This would be a good time to use the This would be a good time to use the This would be a good time to use the voronoid texture. Not the color or the voronoid texture. Not the color or the voronoid texture. Not the color or the position cuz those are just constant position cuz those are just constant position cuz those are just constant values per cell but maybe the distance values per cell but maybe the distance values per cell but maybe the distance would look good. Interesting. So now you would look good. Interesting. So now you would look good. Interesting. So now you have this flow that's kind of have this flow that's kind of have this flow that's kind of constrained to the cells which means it constrained to the cells which means it constrained to the cells which means it would kind of have to swirl to avoid would kind of have to swirl to avoid would kind of have to swirl to avoid divergence. Very interesting. You ready divergence. Very interesting. You ready divergence. Very interesting. You ready for a super cool one? So here I did my for a super cool one? So here I did my for a super cool one? So here I did my sine waves through X and Y and added sine waves through X and Y and added sine waves through X and Y and added them together. So the only way it can them together. So the only way it can them together. So the only way it can avoid divergence is by making all of avoid divergence is by making all of avoid divergence is by making all of these whirlpools. I mean come on. That's these whirlpools. I mean come on. That's these whirlpools. I mean come on. That's super cool. What happens if I make one super cool. What happens if I make one super cool. What happens if I make one of them a tangent? I don't even know. of them a tangent? I don't even know. of them a tangent? I don't even know. Okay, new patterns unlocked. So, what Okay, new patterns unlocked. So, what Okay, new patterns unlocked. So, what did we learn today? What's the takeaway did we learn today? What's the takeaway did we learn today? What's the takeaway of all this? Well, we learned that of all this? Well, we learned that of all this? Well, we learned that avoiding divergence, like where noise avoiding divergence, like where noise avoiding divergence, like where noise shrinks or compresses or whatever, is shrinks or compresses or whatever, is shrinks or compresses or whatever, is really hard to do, or one obvious way to really hard to do, or one obvious way to really hard to do, or one obvious way to do it is to take the curl of a field cuz do it is to take the curl of a field cuz do it is to take the curl of a field cuz that ensures that it has no divergence. that ensures that it has no divergence. that ensures that it has no divergence. I'm sure there's other ways to generate I'm sure there's other ways to generate I'm sure there's other ways to generate them. Moving around points is actually them. Moving around points is actually them. Moving around points is actually kind of the obvious way to visualize it, kind of the obvious way to visualize it, kind of the obvious way to visualize it, but you could totally like do anything but you could totally like do anything but you could totally like do anything with it. You can move around strings. with it. You can move around strings. with it. You can move around strings. You can use it as a rule for how much to You can use it as a rule for how much to You can use it as a rule for how much to extrude things, whatever. So, the extrude things, whatever. So, the extrude things, whatever. So, the project files of the renders you see are project files of the renders you see are project files of the renders you see are going to be available on cgmatter.com going to be available on cgmatter.com going to be available on cgmatter.com for members. Blend files at for members. Blend files at for members. Blend files at cgmatter.com. Thank you for watching.